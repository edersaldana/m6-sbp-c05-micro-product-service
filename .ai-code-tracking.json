{
  "version": "1.0",
  "records": [
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1762993423780,
      "startOffset": 0,
      "endOffset": 81,
      "codeContent": "import static org.junit.jupiter.api.Assertions.*;\nclass ProductServiceTest {\n  \n}",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1762993423817,
      "startOffset": 0,
      "endOffset": 45,
      "codeContent": "package com.tecsup.app.micro.product.service;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1762993423922,
      "startOffset": 125,
      "endOffset": 152,
      "codeContent": "public void dummy() {\n    }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 2
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1762993423963,
      "startOffset": 129,
      "endOffset": 170,
      "codeContent": "@org.junit.jupiter.api.Test\nvoid () {\n  }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1762993424019,
      "startOffset": 47,
      "endOffset": 81,
      "codeContent": "import org.junit.jupiter.api.Test;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductServiceTest.java",
      "timestamp": 1762993444659,
      "startOffset": 135,
      "endOffset": 173,
      "codeContent": "org.springframework.boot.test.context.",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductServiceTest.java",
      "timestamp": 1762993444665,
      "startOffset": 81,
      "endOffset": 141,
      "codeContent": "import org.springframework.boot.test.context.SpringBootTest;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1762993444691,
      "startOffset": 81,
      "endOffset": 142,
      "codeContent": "\nimport org.springframework.boot.test.context.SpringBootTest;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 2
    },
    {
      "filePath": "/ProductServiceTest.java",
      "timestamp": 1762994325688,
      "startOffset": 244,
      "endOffset": 264,
      "codeContent": "IntellijIdeaRulezzz ",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1762994337602,
      "startOffset": 251,
      "endOffset": 291,
      "codeContent": "com.tecsup.app.micro.product.repository.",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1762994337617,
      "startOffset": 47,
      "endOffset": 112,
      "codeContent": "import com.tecsup.app.micro.product.repository.ProductRepository;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductServiceTest.java",
      "timestamp": 1762994339504,
      "startOffset": 47,
      "endOffset": 113,
      "codeContent": "import com.tecsup.app.micro.product.repository.ProductRepository;\n",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 2
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1762994349090,
      "startOffset": 314,
      "endOffset": 369,
      "codeContent": "org.springframework.test.context.bean.override.mockito.",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1762994349104,
      "startOffset": 208,
      "endOffset": 282,
      "codeContent": "import org.springframework.test.context.bean.override.mockito.MockitoBean;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductServiceTest.java",
      "timestamp": 1762994357114,
      "startOffset": 208,
      "endOffset": 283,
      "codeContent": "\nimport org.springframework.test.context.bean.override.mockito.MockitoBean;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 2
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1762994368002,
      "startOffset": 148,
      "endOffset": 210,
      "codeContent": "import org.springframework.beans.factory.annotation.Autowired;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductServiceTest.java",
      "timestamp": 1762994370942,
      "startOffset": 147,
      "endOffset": 210,
      "codeContent": "\nimport org.springframework.beans.factory.annotation.Autowired;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 2
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1762994395790,
      "startOffset": 47,
      "endOffset": 104,
      "codeContent": "import com.tecsup.app.micro.product.mapper.ProductMapper;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductService.java",
      "timestamp": 1764452860468,
      "startOffset": 1090,
      "endOffset": 1110,
      "codeContent": "IntellijIdeaRulezzz ",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/main/java/com/tecsup/app/micro/product/service/ProductService.java",
      "timestamp": 1764452903373,
      "startOffset": 496,
      "endOffset": 518,
      "codeContent": "import java.util.List;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductService.java",
      "timestamp": 1764452912657,
      "startOffset": 496,
      "endOffset": 520,
      "codeContent": "\n\nimport java.util.List;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/ProductService.java",
      "timestamp": 1764452976748,
      "startOffset": 1233,
      "endOffset": 1289,
      "codeContent": "Collections.singletonList(this.mapper.toDomain(entities)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductService.java",
      "timestamp": 1764452976760,
      "startOffset": 498,
      "endOffset": 527,
      "codeContent": "import java.util.Collections;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/main/java/com/tecsup/app/micro/product/service/ProductService.java",
      "timestamp": 1764452976792,
      "startOffset": 1263,
      "endOffset": 1319,
      "codeContent": "Collections.singletonList(this.mapper.toDomain(entities)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductService.java",
      "timestamp": 1764452980037,
      "startOffset": 1310,
      "endOffset": 1361,
      "codeContent": "(com.tecsup.app.micro.product.entity.ProductEntity)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductService.java",
      "timestamp": 1764452994027,
      "startOffset": 1233,
      "endOffset": 1307,
      "codeContent": "Collections.singletonList(this.mapper.toDomain((ProductEntity) entities));",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductService.java",
      "timestamp": 1764452994027,
      "startOffset": 498,
      "endOffset": 528,
      "codeContent": "import java.util.Collections;\n",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 2
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/main/java/com/tecsup/app/micro/product/service/ProductService.java",
      "timestamp": 1764453044073,
      "startOffset": 1475,
      "endOffset": 1504,
      "codeContent": "com.tecsup.app.micro.product.",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/main/java/com/tecsup/app/micro/product/service/ProductService.java",
      "timestamp": 1764453044085,
      "startOffset": 47,
      "endOffset": 109,
      "codeContent": "import com.tecsup.app.micro.product.ProductServiceApplication;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductService.java",
      "timestamp": 1764454800273,
      "startOffset": 1655,
      "endOffset": 1691,
      "codeContent": "    \n    pIntellijIdeaRulezzz \n    \n",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/ProductService.java",
      "timestamp": 1764454879444,
      "startOffset": 1740,
      "endOffset": 1796,
      "codeContent": "RuntimeException(\"Product no encontrado con id: \" + id);",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductController.java",
      "timestamp": 1764454991906,
      "startOffset": 921,
      "endOffset": 941,
      "codeContent": "IntellijIdeaRulezzz ",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductController.java",
      "timestamp": 1764455044342,
      "startOffset": 520,
      "endOffset": 542,
      "codeContent": "import java.util.List;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/main/java/com/tecsup/app/micro/product/controller/ProductController.java",
      "timestamp": 1764455066515,
      "startOffset": 520,
      "endOffset": 542,
      "codeContent": "import java.util.List;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductController.java",
      "timestamp": 1764455082973,
      "startOffset": 520,
      "endOffset": 544,
      "codeContent": "\n\nimport java.util.List;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/ProductService.java",
      "timestamp": 1764455097815,
      "startOffset": 1852,
      "endOffset": 1892,
      "codeContent": "public\u003c__TMP__\u003e __TMP__ getAllUsers() {}",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductService.java",
      "timestamp": 1764455097867,
      "startOffset": 1863,
      "endOffset": 1919,
      "codeContent": "java.util.List\u003ccom.tecsup.app.micro.product.dto.Product\u003e",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/main/java/com/tecsup/app/micro/product/service/ProductService.java",
      "timestamp": 1764455099591,
      "startOffset": 1863,
      "endOffset": 1919,
      "codeContent": "java.util.List\u003ccom.tecsup.app.micro.product.dto.Product\u003e",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/main/java/com/tecsup/app/micro/product/service/ProductService.java",
      "timestamp": 1764455108972,
      "startOffset": 1878,
      "endOffset": 1911,
      "codeContent": "com.tecsup.app.micro.product.dto.",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/main/java/com/tecsup/app/micro/product/controller/ProductController.java",
      "timestamp": 1764455160235,
      "startOffset": 275,
      "endOffset": 324,
      "codeContent": "import org.springframework.web.bind.annotation.*;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductController.java",
      "timestamp": 1764463528114,
      "startOffset": 1016,
      "endOffset": 1036,
      "codeContent": "IntellijIdeaRulezzz ",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/main/java/com/tecsup/app/micro/product/controller/ProductController.java",
      "timestamp": 1764463565493,
      "startOffset": 227,
      "endOffset": 270,
      "codeContent": "import org.springframework.http.HttpStatus;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1764463970869,
      "startOffset": 83,
      "endOffset": 5266,
      "codeContent": "client.User;\nimport com.tecsup.app.micro.product.client.UserClient;\nimport com.tecsup.app.micro.product.dto.Product;\nimport com.tecsup.app.micro.product.entity.ProductEntity;\nimport com.tecsup.app.micro.product.mapper.ProductMapper;\nimport com.tecsup.app.micro.product.repository.ProductRepository;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.Mockito;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.bean.override.mockito.MockitoBean;\n\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Optional;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@SpringBootTest\nclass ProductServiceTest {\n\n    @MockitoBean\n    private ProductRepository productRepository;\n\n    @MockitoBean\n    private ProductMapper productMapper;\n\n    @MockitoBean\n    private UserClient userClient;\n\n    @Autowired\n    private ProductService productService;\n\n\n    // \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    // TEST: getUserById\n    // \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    @Test\n    void getUserById_ok() {\n\n        Long id \u003d 1L;\n\n        ProductEntity entity \u003d new ProductEntity();\n        entity.setId(id);\n        entity.setCreatedBy(10L);\n\n        User user \u003d new User();\n        user.setId(10L);\n        user.setName(\"Juan Perez\");\n\n        Product expected \u003d new Product();\n        expected.setId(id);\n        expected.setUserName(\"Juan Perez\");\n\n        when(productRepository.findById(id)).thenReturn(Optional.of(entity));\n        when(userClient.getUserById(10L)).thenReturn(user);\n        when(productMapper.toDomainWithUser(entity, user)).thenReturn(expected);\n\n        Product result \u003d productService.getUserById(id);\n\n        assertNotNull(result);\n        assertEquals(\"Juan Perez\", result.getUserName());\n\n        verify(productRepository).findById(id);\n        verify(userClient).getUserById(10L);\n        verify(productMapper).toDomainWithUser(entity, user);\n    }\n\n    // \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    // TEST: getAllProducts\n    // \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    @Test\n    void getAllProducts_ok() {\n\n        ProductEntity entity1 \u003d new ProductEntity();\n        entity1.setId(1L);\n\n        ProductEntity entity2 \u003d new ProductEntity();\n        entity2.setId(2L);\n\n        Product p1 \u003d new Product();\n        p1.setId(1L);\n\n        Product p2 \u003d new Product();\n        p2.setId(2L);\n\n        List\u003cProductEntity\u003e entityList \u003d Arrays.asList(entity1, entity2);\n\n        when(productRepository.findAll()).thenReturn(entityList);\n        when(productMapper.toDomain(entity1)).thenReturn(p1);\n        when(productMapper.toDomain(entity2)).thenReturn(p2);\n\n        List\u003cProduct\u003e result \u003d productService.getAllProducts();\n\n        assertEquals(2, result.size());\n        assertEquals(1L, result.get(0).getId());\n        assertEquals(2L, result.get(1).getId());\n\n        verify(productRepository).findAll();\n        verify(productMapper).toDomain(entity1);\n        verify(productMapper).toDomain(entity2);\n    }\n\n\n    // \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    // TEST: createProduct\n    // \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    @Test\n    void createProduct_ok() {\n\n        Product input \u003d new Product();\n        input.setName(\"Laptop\");\n\n        ProductEntity entity \u003d new ProductEntity();\n        entity.setName(\"Laptop\");\n\n        ProductEntity saved \u003d new ProductEntity();\n        saved.setId(1L);\n        saved.setName(\"Laptop\");\n\n        Product expected \u003d new Product();\n        expected.setId(1L);\n        expected.setName(\"Laptop\");\n\n        when(productMapper.toEntity(input)).thenReturn(entity);\n        when(productRepository.save(entity)).thenReturn(saved);\n        when(productMapper.toDomain(saved)).thenReturn(expected);\n\n        Product result \u003d productService.createProduct(input);\n\n        assertNotNull(result);\n        assertEquals(1L, result.getId());\n        assertEquals(\"Laptop\", result.getName());\n\n        verify(productMapper).toEntity(input);\n        verify(productRepository).save(entity);\n        verify(productMapper).toDomain(saved);\n    }\n\n\n    // \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    // TEST: deleteProduct\n    // \u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n    @Test\n    void deleteProduct_ok() {\n\n        Long id \u003d 1L;\n\n        when(productRepository.existsById(id)).thenReturn(true);\n\n        productService.deleteProduct(id);\n\n        verify(productRepository).existsById(id);\n        verify(productRepository).deleteById(id);\n    }\n\n    @Test\n    void deleteProduct_notFound() {\n\n        Long id \u003d 99L;\n\n        when(productRepository.existsById(id)).thenReturn(false);\n\n        RuntimeException ex \u003d\n                assertThrows(RuntimeException.class, () -\u003e productService.deleteProduct(id));\n\n        assertEquals(\"Product no encontrado con id: 99\", ex.getMessage());\n\n        verify(productRepository).existsById(id);\n        verify(productRepository, never()).deleteById(any());\n    }\n\n}\n",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 175
    },
    {
      "filePath": "/Product.java",
      "timestamp": 1764463995588,
      "startOffset": 514,
      "endOffset": 554,
      "codeContent": "public\u003c__TMP__\u003e __TMP__ setUserName() {}",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/Product.java",
      "timestamp": 1764463995611,
      "startOffset": 514,
      "endOffset": 554,
      "codeContent": "public\u003c__TMP__\u003e __TMP__ setUserName() {}",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/ProductServiceTest.java",
      "timestamp": 1764464182886,
      "startOffset": 1469,
      "endOffset": 1493,
      "codeContent": "\n        user \u003d new User",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 2
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/test/java/com/tecsup/app/micro/product/service/ProductServiceTest.java",
      "timestamp": 1764464906592,
      "startOffset": 417,
      "endOffset": 457,
      "codeContent": "com.tecsup.app.micro.product.client.User",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/main/java/com/tecsup/app/micro/product/client/User.java",
      "timestamp": 1764464985186,
      "startOffset": 104,
      "endOffset": 143,
      "codeContent": "\n@NoArgsConstructor\n@AllArgsConstructor",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-product-service/src/main/java/com/tecsup/app/micro/product/service/ProductService.java",
      "timestamp": 1764465384744,
      "startOffset": 1413,
      "endOffset": 1559,
      "codeContent": "List\u003cProductEntity\u003e entities \u003d productRepository.findAll();\n    return entities.stream()\n            .map(mapper::toDomain)\n            .toList();",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/service/OrderService.java",
      "timestamp": 1764469278303,
      "startOffset": 0,
      "endOffset": 6537,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport com.orden.service.orden_service.repository.OrderItemRepository;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.Spy;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private OrderItemRepository orderItemRepository;\n\n    @Spy\n    @InjectMocks\n    private OrderService orderService;\n\n    // ---------------------- TEST 1 ----------------------\n    @Test\n    void testFindByIdReturnNullWhenNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient);\n    }\n\n    // ---------------------- TEST 2 ----------------------\n    @Test\n    void testFindByIdSuccess() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 10L;\n        Long productId \u003d 20L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setUserId(userId);\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(productId);\n        itemEntity.setQuantity(2);\n        itemEntity.setUnitPrice(BigDecimal.valueOf(50));\n        orderEntity.setItems(Set.of(itemEntity));\n\n        User user \u003d new User();\n        user.setId(userId);\n        user.setName(\"Test User\");\n\n        Product product \u003d new Product();\n        product.setId(productId);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        OrderItem mappedItem \u003d new OrderItem();\n        mappedItem.setProductId(productId);\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(orderId);\n        mappedOrder.setOrderNumber(\"ORD-2024-001\");\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(productId)).thenReturn(product);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product)).thenReturn(mappedItem);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-001\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n    }\n\n    // ---------------------- TEST 3 ----------------------\n    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 10L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setUserId(userId);\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(100L);\n\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(200L);\n\n        orderEntity.getItems().add(item1);\n        orderEntity.getItems().add(item2);\n\n        User user \u003d new User();\n        user.setId(userId);\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(anyLong())).thenReturn(new Product());\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(new Order());\n        when(orderItemMapper.toDomainWithProduct(any(), any())).thenReturn(new OrderItem());\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertEquals(2, result.getItems().size());\n        verify(productClient, times(2)).getProductById(anyLong());\n    }\n\n    // ---------------------- TEST 4 ----------------------\n    @Test\n    void testRegisterOrderSuccess() {\n\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(10L);\n\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(100L);\n        itemRequest.setQuantity(2);\n\n        request.setItems(List.of(itemRequest));\n\n        Product product \u003d new Product();\n        product.setId(100L);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        when(productClient.getProductById(100L)).thenReturn(product);\n        when(orderRepository.save(any())).thenAnswer(inv -\u003e {\n            OrderEntity saved \u003d inv.getArgument(0);\n            saved.setId(1L);\n            return saved;\n        });\n\n        // Mock nextOrderNumber()\n        doReturn(\"ORD-2024-010\").when(orderService).nextOrderNumber();\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(1L);\n\n        User user \u003d new User();\n        user.setId(10L);\n\n        when(orderMapper.toDomain(any())).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(any(), any())).thenReturn(new OrderItem());\n        when(userClient.getUserById(10L)).thenReturn(user);\n\n        Order result \u003d orderService.register(request);\n\n        assertNotNull(result);\n        assertEquals(1L, result.getId());\n        assertEquals(\"ORD-2024-010\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(orderRepository).save(any());\n        verify(productClient).getProductById(100L);\n    }\n}\n",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 194
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/service/OrderService.java",
      "timestamp": 1764469285451,
      "startOffset": 0,
      "endOffset": 5084,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderItemRepository;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport lombok.AllArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport com.orden.service.orden_service.client.User;\nimport org.hibernate.Hibernate;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.*;\nimport java.util.stream.Collectors;\n\n@Service\n@AllArgsConstructor\n@Slf4j\npublic class OrderService {\n\n    private  final UserClient userClient;\n    private final ProductClient productClient;\n\n    private final OrderMapper orderMapper;\n    private final OrderRepository orderRepository;\n    private final OrderItemMapper orderItemMapper;\n\n    private OrderItemRepository orderItemRepository;\n\n\n    @Transactional(readOnly \u003d true)\n    public Order findById(Long id) {\n        // Trae la entidad del repositorio\n        //OrderEntity entity \u003d orderRepository.findById(id).orElse(null);\n        OrderEntity entity \u003d orderRepository.findByIdWithItems(id).orElse(null);\n        if (entity \u003d\u003d null) {\n            return null;\n        }\n\n        log.info(\"Orden encontrada: {}\", entity.getOrderNumber());\n        log.info(\"Items de la orden (size\u003d{}): {}\", entity.getItems().size(), entity.getItems());\n\n        // Trae el usuario\n        User user \u003d userClient.getUserById(entity.getUserId());\n\n        //List\u003cOrderItemEntity\u003e items \u003d orderItemRepository.findByOrderId(id);\n        // Trabaja sobre una copia de la colecci√≥n para evitar ConcurrentModificationException\n        Set\u003cOrderItem\u003e orderItems \u003d entity.getItems().stream()\n                .map(item -\u003e {\n                    Product product \u003d productClient.getProductById(item.getProductId());\n                    return orderItemMapper.toDomainWithProduct(item, product);\n                })\n                .collect(Collectors.toSet());\n\n        // Mapea la orden con usuario\n        Order order \u003d orderMapper.toDomainWithUser(entity, user);\n        order.setItems(orderItems);\n\n        return order;\n    }\n\n    public Order register(CreateOrderRequest createOrderRequest) {\n        final OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setUserId(createOrderRequest.getUserId());\n        orderEntity.setOrderNumber(nextOrderNumber());\n        orderEntity.setStatus(\"PENDING\");\n        BigDecimal total\u003dBigDecimal.ZERO;\n        for(CreateOrderRequest.Item item  : createOrderRequest.getItems()){\n            final OrderItemEntity orderItemEntity \u003d new OrderItemEntity();\n            Product product \u003d productClient.getProductById(item.getProductId());\n\n            orderItemEntity.setProductId(item.getProductId());\n            orderItemEntity.setQuantity(item.getQuantity());\n            orderItemEntity.setUnitPrice(product.getPrice());\n\n            orderItemEntity.setSubtotal(product.getPrice().multiply(BigDecimal.valueOf(item.getQuantity())));\n\n            orderItemEntity.setOrderEntity(orderEntity);\n\n            orderEntity.getItems().add(orderItemEntity);\n            total\u003dtotal.add(orderItemEntity.getSubtotal());\n        }\n\n        orderEntity.setTotalAmount(total);\n        OrderEntity orderSaved \u003d orderRepository.save(orderEntity);\n\n        Set\u003cOrderItem\u003e orderItems\u003dorderSaved.getItems().stream()\n                .map(item -\u003e {Product product \u003d productClient.getProductById(item.getProductId());\n                    return orderItemMapper.toDomainWithProduct(item, product);\n                })\n                .collect(Collectors.toSet());\n\n        Order order \u003d orderMapper.toDomain(orderSaved);\n        User user \u003d (User) userClient.getUserById(createOrderRequest.getUserId());\n        order.setUser(user);\n        order.setItems(orderItems);\n        return order;\n    }\n\n    private String nextOrderNumber() {\n        int numberId \u003d 0;\n        int year \u003d LocalDate.now().getYear();\n        Optional\u003cOrderEntity\u003e lastOrderEntity \u003d orderRepository.findTopByOrderByIdDesc();\n\n        if (lastOrderEntity.isPresent()) {\n            String lastOrderNumber \u003d lastOrderEntity.get().getOrderNumber();\n            String[] parts \u003d lastOrderNumber.split(\"-\");\n            if (parts.length \u003d\u003d 3 \u0026\u0026 parts[1].equals(String.valueOf(year))) {\n                numberId \u003d Integer.parseInt(parts[2]) + 1;\n            }\n        }\n\n        return String.format(\"ORD-%d-%03d\", year, numberId);\n    }\n}\n",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 127
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469288401,
      "startOffset": 0,
      "endOffset": 6537,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport com.orden.service.orden_service.repository.OrderItemRepository;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.Spy;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private OrderItemRepository orderItemRepository;\n\n    @Spy\n    @InjectMocks\n    private OrderService orderService;\n\n    // ---------------------- TEST 1 ----------------------\n    @Test\n    void testFindByIdReturnNullWhenNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient);\n    }\n\n    // ---------------------- TEST 2 ----------------------\n    @Test\n    void testFindByIdSuccess() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 10L;\n        Long productId \u003d 20L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setUserId(userId);\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(productId);\n        itemEntity.setQuantity(2);\n        itemEntity.setUnitPrice(BigDecimal.valueOf(50));\n        orderEntity.setItems(Set.of(itemEntity));\n\n        User user \u003d new User();\n        user.setId(userId);\n        user.setName(\"Test User\");\n\n        Product product \u003d new Product();\n        product.setId(productId);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        OrderItem mappedItem \u003d new OrderItem();\n        mappedItem.setProductId(productId);\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(orderId);\n        mappedOrder.setOrderNumber(\"ORD-2024-001\");\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(productId)).thenReturn(product);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product)).thenReturn(mappedItem);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-001\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n    }\n\n    // ---------------------- TEST 3 ----------------------\n    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 10L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setUserId(userId);\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(100L);\n\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(200L);\n\n        orderEntity.getItems().add(item1);\n        orderEntity.getItems().add(item2);\n\n        User user \u003d new User();\n        user.setId(userId);\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(anyLong())).thenReturn(new Product());\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(new Order());\n        when(orderItemMapper.toDomainWithProduct(any(), any())).thenReturn(new OrderItem());\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertEquals(2, result.getItems().size());\n        verify(productClient, times(2)).getProductById(anyLong());\n    }\n\n    // ---------------------- TEST 4 ----------------------\n    @Test\n    void testRegisterOrderSuccess() {\n\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(10L);\n\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(100L);\n        itemRequest.setQuantity(2);\n\n        request.setItems(List.of(itemRequest));\n\n        Product product \u003d new Product();\n        product.setId(100L);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        when(productClient.getProductById(100L)).thenReturn(product);\n        when(orderRepository.save(any())).thenAnswer(inv -\u003e {\n            OrderEntity saved \u003d inv.getArgument(0);\n            saved.setId(1L);\n            return saved;\n        });\n\n        // Mock nextOrderNumber()\n        doReturn(\"ORD-2024-010\").when(orderService).nextOrderNumber();\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(1L);\n\n        User user \u003d new User();\n        user.setId(10L);\n\n        when(orderMapper.toDomain(any())).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(any(), any())).thenReturn(new OrderItem());\n        when(userClient.getUserById(10L)).thenReturn(user);\n\n        Order result \u003d orderService.register(request);\n\n        assertNotNull(result);\n        assertEquals(1L, result.getId());\n        assertEquals(\"ORD-2024-010\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(orderRepository).save(any());\n        verify(productClient).getProductById(100L);\n    }\n}\n",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 194
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469302987,
      "startOffset": 2626,
      "endOffset": 2698,
      "codeContent": "(java.util.List\u003ccom.orden.service.orden_service.entity.OrderItemEntity\u003e)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469306346,
      "startOffset": 2626,
      "endOffset": 2698,
      "codeContent": "(java.util.List\u003ccom.orden.service.orden_service.entity.OrderItemEntity\u003e)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469313165,
      "startOffset": 4030,
      "endOffset": 4099,
      "codeContent": "java.util.List\u003ccom.orden.service.orden_service.entity.OrderItemEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469314461,
      "startOffset": 4030,
      "endOffset": 4099,
      "codeContent": "java.util.List\u003ccom.orden.service.orden_service.entity.OrderItemEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317012,
      "startOffset": 4039,
      "endOffset": 4098,
      "codeContent": "public int size() {\n                return 0;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317037,
      "startOffset": 4039,
      "endOffset": 4109,
      "codeContent": "public boolean isEmpty() {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317069,
      "startOffset": 4039,
      "endOffset": 4118,
      "codeContent": "public boolean contains(Object o) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317097,
      "startOffset": 4039,
      "endOffset": 4127,
      "codeContent": "public Iterator\u003cOrderItemEntity\u003e iterator() {\n                return null;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317141,
      "startOffset": 4039,
      "endOffset": 4118,
      "codeContent": "public Object[] toArray() {\n                return new Object[0];\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317388,
      "startOffset": 4030,
      "endOffset": 4099,
      "codeContent": "java.util.List\u003ccom.orden.service.orden_service.entity.OrderItemEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317797,
      "startOffset": 4039,
      "endOffset": 4098,
      "codeContent": "public int size() {\n                return 0;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317821,
      "startOffset": 4039,
      "endOffset": 4109,
      "codeContent": "public boolean isEmpty() {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317851,
      "startOffset": 4039,
      "endOffset": 4118,
      "codeContent": "public boolean contains(Object o) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317879,
      "startOffset": 4039,
      "endOffset": 4127,
      "codeContent": "public Iterator\u003cOrderItemEntity\u003e iterator() {\n                return null;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317908,
      "startOffset": 4039,
      "endOffset": 4118,
      "codeContent": "public Object[] toArray() {\n                return new Object[0];\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317944,
      "startOffset": 4039,
      "endOffset": 4113,
      "codeContent": "public \u003cT\u003e T[] toArray(T[] a) {\n                return null;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469317981,
      "startOffset": 4039,
      "endOffset": 4136,
      "codeContent": "public boolean add(OrderItemEntity orderItemEntity) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469318470,
      "startOffset": 4030,
      "endOffset": 4099,
      "codeContent": "java.util.List\u003ccom.orden.service.orden_service.entity.OrderItemEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320346,
      "startOffset": 4039,
      "endOffset": 4098,
      "codeContent": "public int size() {\n                return 0;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320372,
      "startOffset": 4039,
      "endOffset": 4109,
      "codeContent": "public boolean isEmpty() {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320406,
      "startOffset": 4039,
      "endOffset": 4118,
      "codeContent": "public boolean contains(Object o) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320432,
      "startOffset": 4039,
      "endOffset": 4127,
      "codeContent": "public Iterator\u003cOrderItemEntity\u003e iterator() {\n                return null;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320458,
      "startOffset": 4039,
      "endOffset": 4118,
      "codeContent": "public Object[] toArray() {\n                return new Object[0];\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320491,
      "startOffset": 4039,
      "endOffset": 4113,
      "codeContent": "public \u003cT\u003e T[] toArray(T[] a) {\n                return null;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320541,
      "startOffset": 4039,
      "endOffset": 4136,
      "codeContent": "public boolean add(OrderItemEntity orderItemEntity) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320572,
      "startOffset": 4039,
      "endOffset": 4116,
      "codeContent": "public boolean remove(Object o) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320605,
      "startOffset": 4039,
      "endOffset": 4128,
      "codeContent": "public boolean containsAll(Collection\u003c?\u003e c) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320647,
      "startOffset": 4039,
      "endOffset": 4147,
      "codeContent": "public boolean addAll(Collection\u003c? extends OrderItemEntity\u003e c) {\n                return false;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320691,
      "startOffset": 4039,
      "endOffset": 4158,
      "codeContent": "public boolean addAll(int index, Collection\u003c? extends OrderItemEntity\u003e c) {\n                return false;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320726,
      "startOffset": 4039,
      "endOffset": 4126,
      "codeContent": "public boolean removeAll(Collection\u003c?\u003e c) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320762,
      "startOffset": 4039,
      "endOffset": 4126,
      "codeContent": "public boolean retainAll(Collection\u003c?\u003e c) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320795,
      "startOffset": 4039,
      "endOffset": 4075,
      "codeContent": "public void clear() {\n\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320829,
      "startOffset": 4039,
      "endOffset": 4116,
      "codeContent": "public boolean equals(Object o) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320862,
      "startOffset": 4039,
      "endOffset": 4102,
      "codeContent": "public int hashCode() {\n                return 0;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320898,
      "startOffset": 4039,
      "endOffset": 4121,
      "codeContent": "public OrderItemEntity get(int index) {\n                return null;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320937,
      "startOffset": 4039,
      "endOffset": 4146,
      "codeContent": "public OrderItemEntity set(int index, OrderItemEntity element) {\n                return null;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469320976,
      "startOffset": 4039,
      "endOffset": 4107,
      "codeContent": "public void add(int index, OrderItemEntity element) {\n\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469321026,
      "startOffset": 4030,
      "endOffset": 4099,
      "codeContent": "java.util.List\u003ccom.orden.service.orden_service.entity.OrderItemEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469321454,
      "startOffset": 4030,
      "endOffset": 4099,
      "codeContent": "java.util.List\u003ccom.orden.service.orden_service.entity.OrderItemEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323149,
      "startOffset": 4039,
      "endOffset": 4098,
      "codeContent": "public int size() {\n                return 0;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323180,
      "startOffset": 4039,
      "endOffset": 4109,
      "codeContent": "public boolean isEmpty() {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323204,
      "startOffset": 4039,
      "endOffset": 4118,
      "codeContent": "public boolean contains(Object o) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323228,
      "startOffset": 4039,
      "endOffset": 4127,
      "codeContent": "public Iterator\u003cOrderItemEntity\u003e iterator() {\n                return null;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323255,
      "startOffset": 4039,
      "endOffset": 4118,
      "codeContent": "public Object[] toArray() {\n                return new Object[0];\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323286,
      "startOffset": 4039,
      "endOffset": 4113,
      "codeContent": "public \u003cT\u003e T[] toArray(T[] a) {\n                return null;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323317,
      "startOffset": 4039,
      "endOffset": 4136,
      "codeContent": "public boolean add(OrderItemEntity orderItemEntity) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323347,
      "startOffset": 4039,
      "endOffset": 4116,
      "codeContent": "public boolean remove(Object o) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323377,
      "startOffset": 4039,
      "endOffset": 4128,
      "codeContent": "public boolean containsAll(Collection\u003c?\u003e c) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323411,
      "startOffset": 4039,
      "endOffset": 4147,
      "codeContent": "public boolean addAll(Collection\u003c? extends OrderItemEntity\u003e c) {\n                return false;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323445,
      "startOffset": 4039,
      "endOffset": 4158,
      "codeContent": "public boolean addAll(int index, Collection\u003c? extends OrderItemEntity\u003e c) {\n                return false;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323477,
      "startOffset": 4039,
      "endOffset": 4126,
      "codeContent": "public boolean removeAll(Collection\u003c?\u003e c) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323509,
      "startOffset": 4039,
      "endOffset": 4126,
      "codeContent": "public boolean retainAll(Collection\u003c?\u003e c) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323534,
      "startOffset": 4039,
      "endOffset": 4075,
      "codeContent": "public void clear() {\n\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469323563,
      "startOffset": 4039,
      "endOffset": 4116,
      "codeContent": "public boolean equals(Object o) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469326811,
      "startOffset": 4120,
      "endOffset": 4212,
      "codeContent": "@Override\n            public boolean isEmpty() {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469326853,
      "startOffset": 4212,
      "endOffset": 4313,
      "codeContent": "@Override\n            public boolean contains(Object o) {\n                return false;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469326895,
      "startOffset": 4313,
      "endOffset": 4423,
      "codeContent": "@Override\n            public Iterator\u003cOrderItemEntity\u003e iterator() {\n                return null;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469326936,
      "startOffset": 4423,
      "endOffset": 4524,
      "codeContent": "@Override\n            public Object[] toArray() {\n                return new Object[0];\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469326981,
      "startOffset": 4524,
      "endOffset": 4620,
      "codeContent": "@Override\n            public \u003cT\u003e T[] toArray(T[] a) {\n                return null;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327038,
      "startOffset": 4620,
      "endOffset": 4739,
      "codeContent": "@Override\n            public boolean add(OrderItemEntity orderItemEntity) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327081,
      "startOffset": 4739,
      "endOffset": 4838,
      "codeContent": "@Override\n            public boolean remove(Object o) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327122,
      "startOffset": 4838,
      "endOffset": 4949,
      "codeContent": "@Override\n            public boolean containsAll(Collection\u003c?\u003e c) {\n                return false;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327166,
      "startOffset": 4949,
      "endOffset": 5079,
      "codeContent": "@Override\n            public boolean addAll(Collection\u003c? extends OrderItemEntity\u003e c) {\n                return false;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327213,
      "startOffset": 5079,
      "endOffset": 5220,
      "codeContent": "@Override\n            public boolean addAll(int index, Collection\u003c? extends OrderItemEntity\u003e c) {\n                return false;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327263,
      "startOffset": 5220,
      "endOffset": 5329,
      "codeContent": "@Override\n            public boolean removeAll(Collection\u003c?\u003e c) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327310,
      "startOffset": 5329,
      "endOffset": 5438,
      "codeContent": "@Override\n            public boolean retainAll(Collection\u003c?\u003e c) {\n                return false;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327355,
      "startOffset": 5438,
      "endOffset": 5496,
      "codeContent": "@Override\n            public void clear() {\n\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327397,
      "startOffset": 5496,
      "endOffset": 5595,
      "codeContent": "@Override\n            public boolean equals(Object o) {\n                return false;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327442,
      "startOffset": 5595,
      "endOffset": 5680,
      "codeContent": "@Override\n            public int hashCode() {\n                return 0;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327486,
      "startOffset": 5680,
      "endOffset": 5784,
      "codeContent": "@Override\n            public OrderItemEntity get(int index) {\n                return null;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327541,
      "startOffset": 5784,
      "endOffset": 5913,
      "codeContent": "@Override\n            public OrderItemEntity set(int index, OrderItemEntity element) {\n                return null;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327586,
      "startOffset": 5913,
      "endOffset": 6003,
      "codeContent": "@Override\n            public void add(int index, OrderItemEntity element) {\n\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327632,
      "startOffset": 6003,
      "endOffset": 6110,
      "codeContent": "@Override\n            public OrderItemEntity remove(int index) {\n                return null;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327676,
      "startOffset": 6110,
      "endOffset": 6202,
      "codeContent": "@Override\n            public int indexOf(Object o) {\n                return 0;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327719,
      "startOffset": 6202,
      "endOffset": 6298,
      "codeContent": "@Override\n            public int lastIndexOf(Object o) {\n                return 0;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327762,
      "startOffset": 6298,
      "endOffset": 6416,
      "codeContent": "@Override\n            public ListIterator\u003cOrderItemEntity\u003e listIterator() {\n                return null;\n            }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327819,
      "startOffset": 6416,
      "endOffset": 6543,
      "codeContent": "@Override\n            public ListIterator\u003cOrderItemEntity\u003e listIterator(int index) {\n                return null;\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469327894,
      "startOffset": 6543,
      "endOffset": 6679,
      "codeContent": "@Override\n            public List\u003cOrderItemEntity\u003e subList(int fromIndex, int toIndex) {\n                return List.of();\n            }",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 4
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469372431,
      "startOffset": 5358,
      "endOffset": 5434,
      "codeContent": "(java.util.Set\u003ccom.orden.service.orden_service.dto.CreateOrderRequest.Item\u003e)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/entity/OrderEntity.java",
      "timestamp": 1764469451019,
      "startOffset": 1411,
      "endOffset": 1449,
      "codeContent": "orderEntity.setItems(new HashSet\u003c\u003e());",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764469536032,
      "startOffset": 0,
      "endOffset": 6537,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport com.orden.service.orden_service.repository.OrderItemRepository;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.Spy;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private OrderItemRepository orderItemRepository;\n\n    @Spy\n    @InjectMocks\n    private OrderService orderService;\n\n    // ---------------------- TEST 1 ----------------------\n    @Test\n    void testFindByIdReturnNullWhenNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient);\n    }\n\n    // ---------------------- TEST 2 ----------------------\n    @Test\n    void testFindByIdSuccess() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 10L;\n        Long productId \u003d 20L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setUserId(userId);\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(productId);\n        itemEntity.setQuantity(2);\n        itemEntity.setUnitPrice(BigDecimal.valueOf(50));\n        orderEntity.setItems(Set.of(itemEntity));\n\n        User user \u003d new User();\n        user.setId(userId);\n        user.setName(\"Test User\");\n\n        Product product \u003d new Product();\n        product.setId(productId);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        OrderItem mappedItem \u003d new OrderItem();\n        mappedItem.setProductId(productId);\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(orderId);\n        mappedOrder.setOrderNumber(\"ORD-2024-001\");\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(productId)).thenReturn(product);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product)).thenReturn(mappedItem);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-001\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n    }\n\n    // ---------------------- TEST 3 ----------------------\n    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 10L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setUserId(userId);\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(100L);\n\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(200L);\n\n        orderEntity.getItems().add(item1);\n        orderEntity.getItems().add(item2);\n\n        User user \u003d new User();\n        user.setId(userId);\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(anyLong())).thenReturn(new Product());\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(new Order());\n        when(orderItemMapper.toDomainWithProduct(any(), any())).thenReturn(new OrderItem());\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertEquals(2, result.getItems().size());\n        verify(productClient, times(2)).getProductById(anyLong());\n    }\n\n    // ---------------------- TEST 4 ----------------------\n    @Test\n    void testRegisterOrderSuccess() {\n\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(10L);\n\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(100L);\n        itemRequest.setQuantity(2);\n\n        request.setItems(List.of(itemRequest));\n\n        Product product \u003d new Product();\n        product.setId(100L);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        when(productClient.getProductById(100L)).thenReturn(product);\n        when(orderRepository.save(any())).thenAnswer(inv -\u003e {\n            OrderEntity saved \u003d inv.getArgument(0);\n            saved.setId(1L);\n            return saved;\n        });\n\n        // Mock nextOrderNumber()\n        doReturn(\"ORD-2024-010\").when(orderService).nextOrderNumber();\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(1L);\n\n        User user \u003d new User();\n        user.setId(10L);\n\n        when(orderMapper.toDomain(any())).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(any(), any())).thenReturn(new OrderItem());\n        when(userClient.getUserById(10L)).thenReturn(user);\n\n        Order result \u003d orderService.register(request);\n\n        assertNotNull(result);\n        assertEquals(1L, result.getId());\n        assertEquals(\"ORD-2024-010\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(orderRepository).save(any());\n        verify(productClient).getProductById(100L);\n    }\n}\n",
      "aiProbability": 70,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 194
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/dto/CreateOrderRequest.java",
      "timestamp": 1764469675958,
      "startOffset": 67,
      "endOffset": 92,
      "codeContent": "import java.util.HashSet;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469730433,
      "startOffset": 5431,
      "endOffset": 5507,
      "codeContent": "(java.util.Set\u003ccom.orden.service.orden_service.dto.CreateOrderRequest.Item\u003e)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764469732240,
      "startOffset": 5431,
      "endOffset": 5507,
      "codeContent": "(java.util.Set\u003ccom.orden.service.orden_service.dto.CreateOrderRequest.Item\u003e)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764470753419,
      "startOffset": 0,
      "endOffset": 7326,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport com.orden.service.orden_service.repository.OrderItemRepository;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.Spy;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private OrderItemRepository orderItemRepository;\n\n    @Spy\n    @InjectMocks\n    private OrderService orderService;\n\n    // ---------------------- TEST 1 ----------------------\n    @Test\n    void testFindByIdReturnNullWhenNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient);\n    }\n\n    // ---------------------- TEST 2 ----------------------\n    @Test\n    void testFindByIdSingleItem() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 10L;\n        Long productId \u003d 20L;\n\n        // Entidad\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setUserId(userId);\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(productId);\n        itemEntity.setQuantity(2);\n        itemEntity.setUnitPrice(BigDecimal.valueOf(50));\n        orderEntity.setItems(new HashSet\u003c\u003e(Collections.singletonList(itemEntity)));\n\n        // Usuario y producto\n        User user \u003d new User();\n        user.setId(userId);\n        user.setName(\"Test User\");\n\n        Product product \u003d new Product();\n        product.setId(productId);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        // Mapped DTOs\n        OrderItem mappedItem \u003d new OrderItem();\n        mappedItem.setProductId(productId);\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(orderId);\n        mappedOrder.setOrderNumber(\"ORD-2024-001\");\n\n        // Mocks\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(productId)).thenReturn(product);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product)).thenReturn(mappedItem);\n\n        // Ejecutar test\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-001\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n    }\n\n    // ---------------------- TEST 3 ----------------------\n    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 10L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setUserId(userId);\n\n        // Crear dos items\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(100L);\n\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(200L);\n\n        orderEntity.setItems(new HashSet\u003c\u003e(Arrays.asList(item1, item2)));\n\n        User user \u003d new User();\n        user.setId(userId);\n\n        Product product1 \u003d new Product();\n        product1.setId(100L);\n\n        Product product2 \u003d new Product();\n        product2.setId(200L);\n\n        Order order \u003d new Order();\n\n        OrderItem orderItem1 \u003d new OrderItem();\n        OrderItem orderItem2 \u003d new OrderItem();\n\n        // Mocks\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(100L)).thenReturn(product1);\n        when(productClient.getProductById(200L)).thenReturn(product2);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(item1, product1)).thenReturn(orderItem1);\n        when(orderItemMapper.toDomainWithProduct(item2, product2)).thenReturn(orderItem2);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(2, result.getItems().size());\n        verify(productClient, times(2)).getProductById(anyLong());\n    }\n\n    // ---------------------- TEST 4 ----------------------\n    @Test\n    void testRegisterOrderSuccess() {\n\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(10L);\n\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(100L);\n        itemRequest.setQuantity(2);\n\n        // Usar Set porque el DTO espera Set\n        Set\u003cCreateOrderRequest.Item\u003e items \u003d new HashSet\u003c\u003e();\n        items.add(itemRequest);\n        request.setItems(items);\n\n        Product product \u003d new Product();\n        product.setId(100L);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        // Mocks\n        when(productClient.getProductById(100L)).thenReturn(product);\n        when(orderRepository.save(any())).thenAnswer(inv -\u003e {\n            OrderEntity saved \u003d inv.getArgument(0);\n            saved.setId(1L); // simular ID generado\n            return saved;\n        });\n\n        // Mock nextOrderNumber() usando spy\n        doReturn(\"ORD-2024-010\").when(orderService).nextOrderNumber();\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(1L);\n\n        User user \u003d new User();\n        user.setId(10L);\n\n        when(orderMapper.toDomain(any())).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(any(), any())).thenReturn(new OrderItem());\n        when(userClient.getUserById(10L)).thenReturn(user);\n\n        // Ejecutar test\n        Order result \u003d orderService.register(request);\n\n        assertNotNull(result);\n        assertEquals(1L, result.getId());\n        assertEquals(\"ORD-2024-010\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(orderRepository).save(any());\n        verify(productClient).getProductById(100L);\n    }\n}\n",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 217
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764470869718,
      "startOffset": 0,
      "endOffset": 7460,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport com.orden.service.orden_service.repository.OrderItemRepository;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.Spy;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private OrderItemRepository orderItemRepository;\n\n    @Spy\n    @InjectMocks\n    private OrderService orderService;\n\n    // ---------------------- TEST 1 ----------------------\n    @Test\n    void testFindByIdReturnNullWhenNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient);\n    }\n\n    // ---------------------- TEST 2 ----------------------\n    @Test\n    void testFindByIdSingleItem() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 10L;\n        Long productId \u003d 20L;\n\n        // Entidad\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setUserId(userId);\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(productId);\n        itemEntity.setQuantity(2);\n        itemEntity.setUnitPrice(BigDecimal.valueOf(50));\n        orderEntity.setItems(new HashSet\u003c\u003e(Collections.singletonList(itemEntity)));\n\n        // Usuario y producto\n        User user \u003d new User();\n        user.setId(userId);\n        user.setName(\"Test User\");\n\n        Product product \u003d new Product();\n        product.setId(productId);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        // Mapped DTOs\n        OrderItem mappedItem \u003d new OrderItem();\n        mappedItem.setProductId(productId);\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(orderId);\n        mappedOrder.setOrderNumber(\"ORD-2024-001\");\n\n        // Mocks\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(productId)).thenReturn(product);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product)).thenReturn(mappedItem);\n\n        // Ejecutar test\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-001\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n    }\n\n    // ---------------------- TEST 3 ----------------------\n    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 10L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setUserId(userId);\n\n        // Crear dos items\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(100L);\n\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(200L);\n\n        orderEntity.setItems(new HashSet\u003c\u003e(Arrays.asList(item1, item2)));\n\n        User user \u003d new User();\n        user.setId(userId);\n\n        Product product1 \u003d new Product();\n        product1.setId(100L);\n\n        Product product2 \u003d new Product();\n        product2.setId(200L);\n\n        Order order \u003d new Order();\n\n        OrderItem orderItem1 \u003d new OrderItem();\n        orderItem1.setProductId(100L);\n        OrderItem orderItem2 \u003d new OrderItem();\n        orderItem2.setProductId(200L);\n\n        // Mocks\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(100L)).thenReturn(product1);\n        when(productClient.getProductById(200L)).thenReturn(product2);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(item1, product1)).thenReturn(orderItem1);\n        when(orderItemMapper.toDomainWithProduct(item2, product2)).thenReturn(orderItem2);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(2, result.getItems().size());\n        verify(productClient, times(2)).getProductById(anyLong());\n    }\n\n    // ---------------------- TEST 4 ----------------------\n    @Test\n    void testRegisterOrderSuccess() {\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(10L);\n\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(100L);\n        itemRequest.setQuantity(2);\n\n        Set\u003cCreateOrderRequest.Item\u003e items \u003d new HashSet\u003c\u003e();\n        items.add(itemRequest);\n        request.setItems(items);\n\n        Product product \u003d new Product();\n        product.setId(100L);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        // Mocks\n        when(productClient.getProductById(100L)).thenReturn(product);\n        when(orderRepository.save(any())).thenAnswer(inv -\u003e {\n            OrderEntity saved \u003d inv.getArgument(0);\n            saved.setId(1L); // simular ID generado\n            saved.setOrderNumber(\"ORD-2024-010\");\n            return saved;\n        });\n\n        // Mock nextOrderNumber() usando spy\n        doReturn(\"ORD-2024-010\").when(orderService).nextOrderNumber();\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(1L);\n        mappedOrder.setOrderNumber(\"ORD-2024-010\");\n\n        User user \u003d new User();\n        user.setId(10L);\n\n        when(orderMapper.toDomain(any())).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(any(), any())).thenReturn(new OrderItem());\n        when(userClient.getUserById(10L)).thenReturn(user);\n\n        // Ejecutar test\n        Order result \u003d orderService.register(request);\n\n        assertNotNull(result);\n        assertEquals(1L, result.getId());\n        assertEquals(\"ORD-2024-010\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(orderRepository).save(any());\n        verify(productClient).getProductById(100L);\n    }\n}\n",
      "aiProbability": 70,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 219
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764471348576,
      "startOffset": 0,
      "endOffset": 7439,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.ArgumentMatchers.anyLong;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @InjectMocks\n    private OrderService orderService;\n\n    @BeforeEach\n    void setUp() {\n        // Si nextOrderNumber es private, se puede usar spy para sobrescribirlo\n        orderService \u003d spy(orderService);\n        doReturn(\"ORD-2024-010\").when(orderService).nextOrderNumber();\n    }\n\n    @Test\n    void testFindByIdReturnNullWhenOrderNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient);\n    }\n\n    @Test\n    void testFindByIdReturnsOrderSuccessfully() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 100L;\n        Long productId \u003d 200L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setUserId(userId);\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(productId);\n        itemEntity.setQuantity(2);\n        itemEntity.setUnitPrice(BigDecimal.valueOf(50));\n        orderEntity.getItems().add(itemEntity);\n\n        User user \u003d new User();\n        user.setId(userId);\n        user.setName(\"John Doe\");\n\n        Product product \u003d new Product();\n        product.setId(productId);\n        product.setName(\"Test Product\");\n        product.setPrice(BigDecimal.valueOf(50));\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n        order.setOrderNumber(\"ORD-2024-001\");\n\n        OrderItem orderItem \u003d new OrderItem();\n        orderItem.setProductId(productId);\n        orderItem.setQuantity(2);\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(productId)).thenReturn(product);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product)).thenReturn(orderItem);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-001\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(orderRepository).findByIdWithItems(orderId);\n        verify(userClient).getUserById(userId);\n        verify(productClient).getProductById(productId);\n        verify(orderMapper).toDomainWithUser(orderEntity, user);\n    }\n\n    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 100L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setUserId(userId);\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(200L);\n        item1.setQuantity(1);\n\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(201L);\n        item2.setQuantity(3);\n\n        orderEntity.getItems().add(item1);\n        orderEntity.getItems().add(item2);\n\n        User user \u003d new User();\n        user.setId(userId);\n\n        Product product1 \u003d new Product();\n        product1.setId(200L);\n\n        Product product2 \u003d new Product();\n        product2.setId(201L);\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n\n        OrderItem orderItem1 \u003d new OrderItem();\n        OrderItem orderItem2 \u003d new OrderItem();\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(200L)).thenReturn(product1);\n        when(productClient.getProductById(201L)).thenReturn(product2);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(item1, product1)).thenReturn(orderItem1);\n        when(orderItemMapper.toDomainWithProduct(item2, product2)).thenReturn(orderItem2);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(2, result.getItems().size());\n        verify(productClient, times(2)).getProductById(anyLong());\n    }\n\n    @Test\n    void testRegisterOrderSuccess() {\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(10L);\n\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(100L);\n        itemRequest.setQuantity(2);\n\n        Set\u003cCreateOrderRequest.Item\u003e items \u003d new HashSet\u003c\u003e();\n        items.add(itemRequest);\n        request.setItems(items);\n\n        Product product \u003d new Product();\n        product.setId(100L);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        when(productClient.getProductById(100L)).thenReturn(product);\n\n        when(orderRepository.save(any())).thenAnswer(inv -\u003e {\n            OrderEntity saved \u003d inv.getArgument(0);\n            saved.setId(1L);\n            saved.setOrderNumber(\"ORD-2024-010\");\n            saved.setItems(saved.getItems());\n            return saved;\n        });\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(1L);\n        mappedOrder.setOrderNumber(\"ORD-2024-010\");\n        User user \u003d new User();\n        user.setId(10L);\n\n        when(orderMapper.toDomain(any())).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(any(), any())).thenReturn(new OrderItem());\n        when(userClient.getUserById(10L)).thenReturn(user);\n\n        Order result \u003d orderService.register(request);\n\n        assertNotNull(result);\n        assertEquals(1L, result.getId());\n        assertEquals(\"ORD-2024-010\", result.getOrderNu\n",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 215
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764471360450,
      "startOffset": 0,
      "endOffset": 7614,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.ArgumentMatchers.anyLong;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @InjectMocks\n    private OrderService orderService;\n\n    @BeforeEach\n    void setUp() {\n        // Si nextOrderNumber es private, se puede usar spy para sobrescribirlo\n        orderService \u003d spy(orderService);\n        doReturn(\"ORD-2024-010\").when(orderService).nextOrderNumber();\n    }\n\n    @Test\n    void testFindByIdReturnNullWhenOrderNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient);\n    }\n\n    @Test\n    void testFindByIdReturnsOrderSuccessfully() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 100L;\n        Long productId \u003d 200L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setUserId(userId);\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(productId);\n        itemEntity.setQuantity(2);\n        itemEntity.setUnitPrice(BigDecimal.valueOf(50));\n        orderEntity.getItems().add(itemEntity);\n\n        User user \u003d new User();\n        user.setId(userId);\n        user.setName(\"John Doe\");\n\n        Product product \u003d new Product();\n        product.setId(productId);\n        product.setName(\"Test Product\");\n        product.setPrice(BigDecimal.valueOf(50));\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n        order.setOrderNumber(\"ORD-2024-001\");\n\n        OrderItem orderItem \u003d new OrderItem();\n        orderItem.setProductId(productId);\n        orderItem.setQuantity(2);\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(productId)).thenReturn(product);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product)).thenReturn(orderItem);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-001\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(orderRepository).findByIdWithItems(orderId);\n        verify(userClient).getUserById(userId);\n        verify(productClient).getProductById(productId);\n        verify(orderMapper).toDomainWithUser(orderEntity, user);\n    }\n\n    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 100L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setUserId(userId);\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(200L);\n        item1.setQuantity(1);\n\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(201L);\n        item2.setQuantity(3);\n\n        orderEntity.getItems().add(item1);\n        orderEntity.getItems().add(item2);\n\n        User user \u003d new User();\n        user.setId(userId);\n\n        Product product1 \u003d new Product();\n        product1.setId(200L);\n\n        Product product2 \u003d new Product();\n        product2.setId(201L);\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n\n        OrderItem orderItem1 \u003d new OrderItem();\n        OrderItem orderItem2 \u003d new OrderItem();\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(200L)).thenReturn(product1);\n        when(productClient.getProductById(201L)).thenReturn(product2);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(item1, product1)).thenReturn(orderItem1);\n        when(orderItemMapper.toDomainWithProduct(item2, product2)).thenReturn(orderItem2);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(2, result.getItems().size());\n        verify(productClient, times(2)).getProductById(anyLong());\n    }\n\n    @Test\n    void testRegisterOrderSuccess() {\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(10L);\n\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(100L);\n        itemRequest.setQuantity(2);\n\n        Set\u003cCreateOrderRequest.Item\u003e items \u003d new HashSet\u003c\u003e();\n        items.add(itemRequest);\n        request.setItems(items);\n\n        Product product \u003d new Product();\n        product.setId(100L);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        when(productClient.getProductById(100L)).thenReturn(product);\n\n        when(orderRepository.save(any())).thenAnswer(inv -\u003e {\n            OrderEntity saved \u003d inv.getArgument(0);\n            saved.setId(1L);\n            saved.setOrderNumber(\"ORD-2024-010\");\n            saved.setItems(saved.getItems());\n            return saved;\n        });\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(1L);\n        mappedOrder.setOrderNumber(\"ORD-2024-010\");\n        User user \u003d new User();\n        user.setId(10L);\n\n        when(orderMapper.toDomain(any())).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(any(), any())).thenReturn(new OrderItem());\n        when(userClient.getUserById(10L)).thenReturn(user);\n\n        Order result \u003d orderService.register(request);\n\n        assertNotNull(result);\n        assertEquals(1L, result.getId());\n        assertEquals(\"ORD-2024-010\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n\n        verify(productClient, times(2)).getProductById(100L);\n        verify(orderRepository).save(any());\n    }\n}\n",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 221
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764471414114,
      "startOffset": 0,
      "endOffset": 2100,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.HashSet;\nimport java.util.Optional;\nimport java.util.Set;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @InjectMocks\n    private OrderService orderService;\n\n    @BeforeEach\n    void setUp() {\n        // Sin stubbings innecesarios aqu√≠\n    }\n\n    @Test\n    void testFindByIdReturnNullWhenOrderNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient);\n    }\n\n    @Test\n    void testFindByIdReturnsOrderSuccessfully() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 1\n",
      "aiProbability": 70,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 71
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764471426988,
      "startOffset": 0,
      "endOffset": 6969,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.HashSet;\nimport java.util.Optional;\nimport java.util.Set;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @InjectMocks\n    private OrderService orderService;\n\n    @BeforeEach\n    void setUp() {\n        // Sin stubbings innecesarios aqu√≠\n    }\n\n    @Test\n    void testFindByIdReturnNullWhenOrderNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient);\n    }\n\n    @Test\n    void testFindByIdReturnsOrderSuccessfully() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 100L;\n        Long productId \u003d 200L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setUserId(userId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(productId);\n        itemEntity.setQuantity(2);\n        itemEntity.setUnitPrice(BigDecimal.valueOf(50));\n        orderEntity.getItems().add(itemEntity);\n\n        User user \u003d new User();\n        user.setId(userId);\n        user.setName(\"John Doe\");\n\n        Product product \u003d new Product();\n        product.setId(productId);\n        product.setName(\"Test Product\");\n        product.setPrice(BigDecimal.valueOf(50));\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n        order.setOrderNumber(\"ORD-2024-001\");\n\n        OrderItem orderItem \u003d new OrderItem();\n        orderItem.setProductId(productId);\n        orderItem.setQuantity(2);\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(productId)).thenReturn(product);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product)).thenReturn(orderItem);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(1, result.getItems().size());\n    }\n\n    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 100L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setUserId(userId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(200L);\n        item1.setQuantity(1);\n\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(201L);\n        item2.setQuantity(3);\n\n        // A√±adir items\n        orderEntity.getItems().add(item1);\n        orderEntity.getItems().add(item2);\n\n        User user \u003d new User();\n        user.setId(userId);\n\n        Product product1 \u003d new Product();\n        product1.setId(200L);\n        Product product2 \u003d new Product();\n        product2.setId(201L);\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n\n        OrderItem orderItem1 \u003d new OrderItem();\n        OrderItem orderItem2 \u003d new OrderItem();\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(200L)).thenReturn(product1);\n        when(productClient.getProductById(201L)).thenReturn(product2);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(item1, product1)).thenReturn(orderItem1);\n        when(orderItemMapper.toDomainWithProduct(item2, product2)).thenReturn(orderItem2);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(2, result.getItems().size(), \"Debe devolver 2 items\"); // ahora deber√≠a pasar\n    }\n\n    @Test\n    void testRegisterOrderSuccess() {\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(10L);\n\n        CreateOrderRequest.Item item \u003d new CreateOrderRequest.Item();\n        item.setProductId(100L);\n        item.setQuantity(2);\n\n        Set\u003cCreateOrderRequest.Item\u003e items \u003d new HashSet\u003c\u003e();\n        items.add(item);\n        request.setItems(items);\n\n        Product product \u003d new Product();\n        product.setId(100L);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        when(productClient.getProductById(100L)).thenReturn(product);\n\n        when(orderRepository.save(any())).thenAnswer(inv -\u003e {\n            OrderEntity saved \u003d inv.getArgument(0);\n            saved.setId(1L);\n            saved.setOrderNumber(\"ORD-2024-010\");\n            return saved;\n        });\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(1L);\n        mappedOrder.setOrderNumber(\"ORD-2024-010\");\n\n        User user \u003d new User();\n        user.setId(10L);\n\n        when(orderMapper.toDomain(any())).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(any(), any())).thenReturn(new OrderItem());\n        when(userClient.getUserById(10L)).thenReturn(user);\n\n        Order result \u003d orderService.register(request);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-010\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(productClient, times(2)).getProductById(100L);\n    }\n}\n",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 210
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764471537804,
      "startOffset": 0,
      "endOffset": 6969,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.HashSet;\nimport java.util.Optional;\nimport java.util.Set;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @InjectMocks\n    private OrderService orderService;\n\n    @BeforeEach\n    void setUp() {\n        // Sin stubbings innecesarios aqu√≠\n    }\n\n    @Test\n    void testFindByIdReturnNullWhenOrderNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient);\n    }\n\n    @Test\n    void testFindByIdReturnsOrderSuccessfully() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 100L;\n        Long productId \u003d 200L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setUserId(userId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(productId);\n        itemEntity.setQuantity(2);\n        itemEntity.setUnitPrice(BigDecimal.valueOf(50));\n        orderEntity.getItems().add(itemEntity);\n\n        User user \u003d new User();\n        user.setId(userId);\n        user.setName(\"John Doe\");\n\n        Product product \u003d new Product();\n        product.setId(productId);\n        product.setName(\"Test Product\");\n        product.setPrice(BigDecimal.valueOf(50));\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n        order.setOrderNumber(\"ORD-2024-001\");\n\n        OrderItem orderItem \u003d new OrderItem();\n        orderItem.setProductId(productId);\n        orderItem.setQuantity(2);\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(productId)).thenReturn(product);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product)).thenReturn(orderItem);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(1, result.getItems().size());\n    }\n\n    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n        Long userId \u003d 100L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setUserId(userId);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(200L);\n        item1.setQuantity(1);\n\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(201L);\n        item2.setQuantity(3);\n\n        // A√±adir items\n        orderEntity.getItems().add(item1);\n        orderEntity.getItems().add(item2);\n\n        User user \u003d new User();\n        user.setId(userId);\n\n        Product product1 \u003d new Product();\n        product1.setId(200L);\n        Product product2 \u003d new Product();\n        product2.setId(201L);\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n\n        OrderItem orderItem1 \u003d new OrderItem();\n        OrderItem orderItem2 \u003d new OrderItem();\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(userId)).thenReturn(user);\n        when(productClient.getProductById(200L)).thenReturn(product1);\n        when(productClient.getProductById(201L)).thenReturn(product2);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(item1, product1)).thenReturn(orderItem1);\n        when(orderItemMapper.toDomainWithProduct(item2, product2)).thenReturn(orderItem2);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(2, result.getItems().size(), \"Debe devolver 2 items\"); // ahora deber√≠a pasar\n    }\n\n    @Test\n    void testRegisterOrderSuccess() {\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(10L);\n\n        CreateOrderRequest.Item item \u003d new CreateOrderRequest.Item();\n        item.setProductId(100L);\n        item.setQuantity(2);\n\n        Set\u003cCreateOrderRequest.Item\u003e items \u003d new HashSet\u003c\u003e();\n        items.add(item);\n        request.setItems(items);\n\n        Product product \u003d new Product();\n        product.setId(100L);\n        product.setPrice(BigDecimal.valueOf(50));\n\n        when(productClient.getProductById(100L)).thenReturn(product);\n\n        when(orderRepository.save(any())).thenAnswer(inv -\u003e {\n            OrderEntity saved \u003d inv.getArgument(0);\n            saved.setId(1L);\n            saved.setOrderNumber(\"ORD-2024-010\");\n            return saved;\n        });\n\n        Order mappedOrder \u003d new Order();\n        mappedOrder.setId(1L);\n        mappedOrder.setOrderNumber(\"ORD-2024-010\");\n\n        User user \u003d new User();\n        user.setId(10L);\n\n        when(orderMapper.toDomain(any())).thenReturn(mappedOrder);\n        when(orderItemMapper.toDomainWithProduct(any(), any())).thenReturn(new OrderItem());\n        when(userClient.getUserById(10L)).thenReturn(user);\n\n        Order result \u003d orderService.register(request);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-010\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(productClient, times(2)).getProductById(100L);\n    }\n}\n",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 210
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764471585193,
      "startOffset": 0,
      "endOffset": 7108,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.ArgumentMatchers.anyLong;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @InjectMocks\n    private OrderService orderService;\n\n    private User user;\n    private Product product1;\n    private Product product2;\n\n    @BeforeEach\n    void setUp() {\n        user \u003d new User();\n        user.setId(100L);\n        user.setName(\"John Doe\");\n\n        product1 \u003d new Product();\n        product1.setId(200L);\n        product1.setPrice(BigDecimal.valueOf(50));\n\n        product2 \u003d new Product();\n        product2.setId(201L);\n        product2.setPrice(BigDecimal.valueOf(100));\n    }\n\n    @Test\n    void testFindByIdReturnNullWhenOrderNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient);\n    }\n\n    @Test\n    void testFindByIdReturnsOrderSuccessfully() {\n        Long orderId \u003d 1L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setUserId(user.getId());\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(product1.getId());\n        itemEntity.setQuantity(2);\n\n        orderEntity.setItems(new HashSet\u003c\u003e(Collections.singletonList(itemEntity)));\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n\n        OrderItem orderItem \u003d new OrderItem();\n        orderItem.setProductId(product1.getId());\n        orderItem.setQuantity(2);\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(user.getId())).thenReturn(user);\n        when(productClient.getProductById(product1.getId())).thenReturn(product1);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product1)).thenReturn(orderItem);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-001\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(productClient, times(1)).getProductById(product1.getId());\n    }\n\n    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setUserId(user.getId());\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(product1.getId());\n        item1.setQuantity(1);\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(product2.getId());\n        item2.setQuantity(3);\n\n        orderEntity.setItems(new HashSet\u003c\u003e(Arrays.asList(item1, item2)));\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n\n        OrderItem orderItem1 \u003d new OrderItem();\n        OrderItem orderItem2 \u003d new OrderItem();\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(user.getId())).thenReturn(user);\n        when(productClient.getProductById(product1.getId())).thenReturn(product1);\n        when(productClient.getProductById(product2.getId())).thenReturn(product2);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(item1, product1)).thenReturn(orderItem1);\n        when(orderItemMapper.toDomainWithProduct(item2, product2)).thenReturn(orderItem2);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(2, result.getItems().size(), \"Debe devolver 2 items\");\n        verify(productClient, times(2)).getProductById(anyLong());\n    }\n\n    @Test\n    void testRegisterOrderSuccess() {\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(user.getId());\n\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(product1.getId());\n        itemRequest.setQuantity(2);\n\n        request.setItems(new HashSet\u003c\u003e(Collections.singletonList(itemRequest)));\n\n        OrderEntity savedEntity \u003d new OrderEntity();\n        savedEntity.setId(1L);\n        savedEntity.setUserId(user.getId());\n        savedEntity.setOrderNumber(\"ORD-2024-010\");\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(product1.getId());\n        itemEntity.setQuantity(2);\n        savedEntity.setItems(new HashSet\u003c\u003e(Collections.singletonList(itemEntity)));\n\n        Order order \u003d new Order();\n        order.setId(savedEntity.getId());\n\n        OrderItem orderItem \u003d new OrderItem();\n        orderItem.setProductId(product1.getId());\n        orderItem.setQuantity(2);\n\n        when(productClient.getProductById(product1.getId())).thenReturn(product1);\n        when(orderRepository.save(any(OrderEntity.class))).thenReturn(savedEntity);\n        when(orderMapper.toDomain(savedEntity)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product1)).thenReturn(orderItem);\n        when(userClient.getUserById(user.getId())).thenReturn(user);\n\n        Order result \u003d orderService.register(request);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-010\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(productClient, times(1)).getProductById(product1.getId());\n    }\n}\n",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 198
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764471644656,
      "startOffset": 0,
      "endOffset": 7069,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.ArgumentMatchers.anyLong;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @InjectMocks\n    private OrderService orderService;\n\n    private User user;\n    private Product product1;\n    private Product product2;\n\n    @BeforeEach\n    void setUp() {\n        user \u003d new User();\n        user.setId(100L);\n        user.setName(\"John Doe\");\n\n        product1 \u003d new Product();\n        product1.setId(200L);\n        product1.setPrice(BigDecimal.valueOf(50));\n\n        product2 \u003d new Product();\n        product2.setId(201L);\n        product2.setPrice(BigDecimal.valueOf(100));\n\n        // lenient evita UnnecessaryStubbingException\n        lenient().when(userClient.getUserById(user.getId())).thenReturn(user);\n        lenient().when(productClient.getProductById(product1.getId())).thenReturn(product1);\n        lenient().when(productClient.getProductById(product2.getId())).thenReturn(product2);\n    }\n\n    @Test\n    void testFindByIdReturnNullWhenOrderNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient);\n    }\n\n    @Test\n    void testFindByIdReturnsOrderSuccessfully() {\n        Long orderId \u003d 1L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setUserId(user.getId());\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(product1.getId());\n        itemEntity.setQuantity(2);\n\n        orderEntity.setItems(new HashSet\u003c\u003e(Collections.singletonList(itemEntity)));\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n\n        OrderItem orderItem \u003d new OrderItem();\n        orderItem.setProductId(product1.getId());\n        orderItem.setQuantity(2);\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product1)).thenReturn(orderItem);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-001\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(productClient, times(1)).getProductById(product1.getId());\n    }\n\n    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setUserId(user.getId());\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(product1.getId());\n        item1.setQuantity(1);\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(product2.getId());\n        item2.setQuantity(3);\n\n        orderEntity.setItems(new HashSet\u003c\u003e(Arrays.asList(item1, item2)));\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n\n        OrderItem orderItem1 \u003d new OrderItem();\n        OrderItem orderItem2 \u003d new OrderItem();\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(item1, product1)).thenReturn(orderItem1);\n        when(orderItemMapper.toDomainWithProduct(item2, product2)).thenReturn(orderItem2);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(2, result.getItems().size(), \"Debe devolver 2 items\");\n        verify(productClient, times(2)).getProductById(anyLong());\n    }\n\n    @Test\n    void testRegisterOrderSuccess() {\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(user.getId());\n\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(product1.getId());\n        itemRequest.setQuantity(2);\n\n        request.setItems(new HashSet\u003c\u003e(Collections.singletonList(itemRequest)));\n\n        OrderEntity savedEntity \u003d new OrderEntity();\n        savedEntity.setId(1L);\n        savedEntity.setUserId(user.getId());\n        savedEntity.setOrderNumber(\"ORD-2024-010\");\n\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setProductId(product1.getId());\n        itemEntity.setQuantity(2);\n        savedEntity.setItems(new HashSet\u003c\u003e(Collections.singletonList(itemEntity)));\n\n        Order order \u003d new Order();\n        order.setId(savedEntity.getId());\n\n        OrderItem orderItem \u003d new OrderItem();\n        orderItem.setProductId(product1.getId());\n        orderItem.setQuantity(2);\n\n        // Mock productClient dos veces porque register llama dos veces por cada item\n        lenient().when(productClient.getProductById(product1.getId())).thenReturn(product1);\n\n        when(orderRepository.save(any(OrderEntity.class))).thenReturn(savedEntity);\n        when(orderMapper.toDomain(savedEntity)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(itemEntity, product1)).thenReturn(orderItem);\n\n        Order result \u003d orderService.register(request);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-010\", result.getOrderNumber());\n        assertEquals(1, result.getItems().size());\n        verify(productClient, times(2)).getProductById(product1.getId());\n    }\n}\n",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 199
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764471706000,
      "startOffset": 3974,
      "endOffset": 5333,
      "codeContent": "    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(orderId);\n        orderEntity.setUserId(user.getId());\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(product1.getId());\n        item1.setQuantity(1);\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(product2.getId());\n        item2.setQuantity(3);\n\n        orderEntity.setItems(new HashSet\u003c\u003e(Arrays.asList(item1, item2)));\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n\n        OrderItem orderItem1 \u003d new OrderItem();\n        OrderItem orderItem2 \u003d new OrderItem();\n\n        when(orderRepository.findByIdWithItems(orderId)).thenReturn(Optional.of(orderEntity));\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        when(orderItemMapper.toDomainWithProduct(item1, product1)).thenReturn(orderItem1);\n        when(orderItemMapper.toDomainWithProduct(item2, product2)).thenReturn(orderItem2);\n\n        Order result \u003d orderService.findById(orderId);\n\n        assertNotNull(result);\n        assertEquals(2, result.getItems().size(), \"Debe devolver 2 items\");\n        verify(productClient, times(2)).getProductById(anyLong());\n    }",
      "aiProbability": 70,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 35
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764474595310,
      "startOffset": 0,
      "endOffset": 7584,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\nclass OrderServiceTest {\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @InjectMocks\n    private OrderService orderService;\n\n    private User user;\n    private Product product1;\n    private Product product2;\n    private OrderItemEntity itemEntity1;\n    private OrderItemEntity itemEntity2;\n    private OrderEntity orderEntity;\n\n    @BeforeEach\n    void setUp() {\n        user \u003d new User();\n        user.setId(100L);\n        user.setName(\"John Doe\");\n\n        product1 \u003d new Product();\n        product1.setId(200L);\n        product1.setName(\"Product 1\");\n        product1.setPrice(BigDecimal.valueOf(50));\n\n        product2 \u003d new Product();\n        product2.setId(201L);\n        product2.setName(\"Product 2\");\n        product2.setPrice(BigDecimal.valueOf(30));\n\n        itemEntity1 \u003d new OrderItemEntity();\n        itemEntity1.setProductId(product1.getId());\n        itemEntity1.setQuantity(2);\n        itemEntity1.setUnitPrice(product1.getPrice());\n        itemEntity1.setSubtotal(product1.getPrice().multiply(BigDecimal.valueOf(itemEntity1.getQuantity())));\n\n        itemEntity2 \u003d new OrderItemEntity();\n        itemEntity2.setProductId(product2.getId());\n        itemEntity2.setQuantity(1);\n        itemEntity2.setUnitPrice(product2.getPrice());\n        itemEntity2.setSubtotal(product2.getPrice().multiply(BigDecimal.valueOf(itemEntity2.getQuantity())));\n\n        orderEntity \u003d new OrderEntity();\n        orderEntity.setId(1L);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setUserId(user.getId());\n        orderEntity.setItems(new HashSet\u003c\u003e(Arrays.asList(itemEntity1, itemEntity2)));\n    }\n\n    @Test\n    void testFindByIdReturnNullWhenOrderNotFound() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNull(result);\n        verify(orderRepository).findByIdWithItems(1L);\n        verifyNoInteractions(userClient, productClient, orderMapper, orderItemMapper);\n    }\n\n    @Test\n    void testFindByIdReturnsOrderSuccessfully() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(user.getId())).thenReturn(user);\n        lenient().when(productClient.getProductById(product1.getId())).thenReturn(product1);\n        lenient().when(productClient.getProductById(product2.getId())).thenReturn(product2);\n\n        Order order \u003d new Order();\n        order.setId(orderEntity.getId());\n        order.setOrderNumber(orderEntity.getOrderNumber());\n\n        OrderItem orderItem1 \u003d new OrderItem();\n        orderItem1.setProductId(product1.getId());\n        OrderItem orderItem2 \u003d new OrderItem();\n        orderItem2.setProductId(product2.getId());\n\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        lenient().when(orderItemMapper.toDomainWithProduct(itemEntity1, product1)).thenReturn(orderItem1);\n        lenient().when(orderItemMapper.toDomainWithProduct(itemEntity2, product2)).thenReturn(orderItem2);\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-001\", result.getOrderNumber());\n        assertEquals(2, result.getItems().size());\n        verify(orderRepository).findByIdWithItems(1L);\n        verify(userClient).getUserById(user.getId());\n        verify(orderMapper).toDomainWithUser(orderEntity, user);\n    }\n\n    @Test\n    void testFindByIdMultipleItems() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(user.getId())).thenReturn(user);\n        lenient().when(productClient.getProductById(product1.getId())).thenReturn(product1);\n        lenient().when(productClient.getProductById(product2.getId())).thenReturn(product2);\n\n        Order order \u003d new Order();\n        order.setId(orderEntity.getId());\n        order.setOrderNumber(orderEntity.getOrderNumber());\n\n        OrderItem orderItem1 \u003d new OrderItem();\n        orderItem1.setProductId(product1.getId());\n        OrderItem orderItem2 \u003d new OrderItem();\n        orderItem2.setProductId(product2.getId());\n\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(order);\n        lenient().when(orderItemMapper.toDomainWithProduct(itemEntity1, product1)).thenReturn(orderItem1);\n        lenient().when(orderItemMapper.toDomainWithProduct(itemEntity2, product2)).thenReturn(orderItem2);\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNotNull(result);\n        assertEquals(2, result.getItems().size(), \"Debe devolver 2 items\");\n    }\n\n    @Test\n    void testRegisterOrderSuccess() {\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(user.getId());\n\n        CreateOrderRequest.Item item1Req \u003d new CreateOrderRequest.Item();\n        item1Req.setProductId(product1.getId());\n        item1Req.setQuantity(2);\n\n        CreateOrderRequest.Item item2Req \u003d new CreateOrderRequest.Item();\n        item2Req.setProductId(product2.getId());\n        item2Req.setQuantity(1);\n\n        Set\u003cCreateOrderRequest.Item\u003e items \u003d new HashSet\u003c\u003e();\n        items.add(item1Req);\n        items.add(item2Req);\n        request.setItems(items);\n\n        OrderEntity savedEntity \u003d new OrderEntity();\n        savedEntity.setId(10L);\n        savedEntity.setOrderNumber(\"ORD-2024-010\");\n        savedEntity.setUserId(user.getId());\n        savedEntity.setItems(new HashSet\u003c\u003e()); // Para simplificar\n\n        when(orderRepository.save(any(OrderEntity.class))).thenReturn(savedEntity);\n        when(productClient.getProductById(product1.getId())).thenReturn(product1);\n        when(productClient.getProductById(product2.getId())).thenReturn(product2);\n\n        Order order \u003d new Order();\n        order.setId(savedEntity.getId());\n        order.setOrderNumber(savedEntity.getOrderNumber());\n        when(orderMapper.toDomain(savedEntity)).thenReturn(order);\n        when(userClient.getUserById(user.getId())).thenReturn(user);\n\n        Order result \u003d orderService.register(request);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2024-010\", result.getOrderNumber());\n        assertEquals(user, result.getUser());\n    }\n}\n",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 199
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764475063730,
      "startOffset": 0,
      "endOffset": 6826,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.MockitoAnnotations;\n\nimport java.math.BigDecimal;\nimport java.util.HashSet;\nimport java.util.Optional;\nimport java.util.Set;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\nclass OrderServiceTest {\n\n    @InjectMocks\n    private OrderService orderService;\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    private User mockUser;\n    private Product mockProduct;\n\n    @BeforeEach\n    void setUp() {\n        MockitoAnnotations.openMocks(this);\n\n        mockUser \u003d new User();\n        mockUser.setId(10L);\n        mockUser.setName(\"Test User\");\n\n        mockProduct \u003d new Product();\n        mockProduct.setId(100L);\n        mockProduct.setName(\"Test Product\");\n        mockProduct.setPrice(BigDecimal.valueOf(50));\n\n        // Lenient permite evitar errores por llamadas repetidas en Mockito 4+\n        lenient().when(userClient.getUserById(anyLong())).thenReturn(mockUser);\n        lenient().when(productClient.getProductById(anyLong())).thenReturn(mockProduct);\n    }\n\n    @Test\n    void testRegisterOrderSuccess() {\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(10L);\n\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(100L);\n        itemRequest.setQuantity(2);\n\n        Set\u003cCreateOrderRequest.Item\u003e items \u003d new HashSet\u003c\u003e();\n        items.add(itemRequest);\n        request.setItems(items);\n\n        OrderEntity savedEntity \u003d new OrderEntity();\n        savedEntity.setId(1L);\n        savedEntity.setUserId(10L);\n        savedEntity.setOrderNumber(\"ORD-2024-010\");\n        savedEntity.setItems(new HashSet\u003c\u003e());\n        savedEntity.setTotalAmount(BigDecimal.valueOf(100));\n\n        OrderItemEntity orderItemEntity \u003d new OrderItemEntity();\n        orderItemEntity.setId(1L);\n        orderItemEntity.setProductId(100L);\n        orderItemEntity.setQuantity(2);\n        orderItemEntity.setUnitPrice(BigDecimal.valueOf(50));\n        orderItemEntity.setSubtotal(BigDecimal.valueOf(100));\n        orderItemEntity.setOrderEntity(savedEntity);\n        savedEntity.getItems().add(orderItemEntity);\n\n        when(orderRepository.save(any(OrderEntity.class))).thenReturn(savedEntity);\n        when(orderItemMapper.toDomainWithProduct(any(OrderItemEntity.class), any(Product.class)))\n                .thenAnswer(invocation -\u003e {\n                    OrderItemEntity entity \u003d invocation.getArgument(0);\n                    Product product \u003d invocation.getArgument(1);\n                    OrderItem item \u003d new OrderItem();\n                    item.setProductId(entity.getProductId());\n                    item.setQuantity(entity.getQuantity());\n                    item.setUnitPrice(entity.getUnitPrice());\n                    item.setSubtotal(entity.getSubtotal());\n                    return item;\n                });\n        when(orderMapper.toDomain(any(OrderEntity.class))).thenAnswer(invocation -\u003e {\n            OrderEntity entity \u003d invocation.getArgument(0);\n            Order order \u003d new Order();\n            order.setUser(mockUser);\n            order.setItems(new HashSet\u003c\u003e());\n            order.setOrderNumber(entity.getOrderNumber());\n            return order;\n        });\n\n        Order order \u003d orderService.register(request);\n\n        assertNotNull(order);\n        assertEquals(\"ORD-2024-010\", order.getOrderNumber());\n        assertEquals(1, order.getItems().size());\n        assertEquals(mockUser.getId(), order.getUser().getId());\n    }\n\n    @Test\n    void testFindByIdMultipleItems() {\n        OrderEntity orderEntity \u003d new OrderEntity();\n        orderEntity.setId(1L);\n        orderEntity.setUserId(10L);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setId(1L);\n        item1.setProductId(100L);\n        item1.setQuantity(1);\n        item1.setUnitPrice(BigDecimal.valueOf(50));\n        item1.setSubtotal(BigDecimal.valueOf(50));\n        item1.setOrderEntity(orderEntity);\n\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setId(2L);\n        item2.setProductId(101L);\n        item2.setQuantity(2);\n        item2.setUnitPrice(BigDecimal.valueOf(30));\n        item2.setSubtotal(BigDecimal.valueOf(60));\n        item2.setOrderEntity(orderEntity);\n\n        orderEntity.getItems().add(item1);\n        orderEntity.getItems().add(item2);\n\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.of(orderEntity));\n\n        when(orderItemMapper.toDomainWithProduct(eq(item1), any(Product.class)))\n                .thenReturn(new OrderItem() {{\n                    setProductId(item1.getProductId());\n                    setQuantity(item1.getQuantity());\n                }});\n\n        when(orderItemMapper.toDomainWithProduct(eq(item2), any(Product.class)))\n                .thenReturn(new OrderItem() {{\n                    setProductId(item2.getProductId());\n                    setQuantity(item2.getQuantity());\n                }});\n\n        when(orderMapper.toDomainWithUser(eq(orderEntity), eq(mockUser)))\n                .thenAnswer(invocation -\u003e {\n                    OrderEntity entity \u003d invocation.getArgument(0);\n                    User user \u003d invocation.getArgument(1);\n                    Order order \u003d new Order();\n                    order.setUser(user);\n                    order.setOrderNumber(entity.getOrderNumber());\n                    return order;\n                });\n\n        Order order \u003d orderService.findById(1L);\n\n        assertNotNull(order);\n        assertEquals(2, order.getItems().size(), \"Debe devolver 2 items\");\n        assertEquals(\"ORD-2024-001\", order.getOrderNumber());\n    }\n}\n",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 186
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764475270760,
      "startOffset": 0,
      "endOffset": 2877,
      "codeContent": "package com.orden.service.orden_service.service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.ArgumentMatchers;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.util.*;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@ExtendWith(MockitoExtension.class)\npublic class OrderServiceTest {\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @InjectMocks\n    private OrderService orderService;\n\n    private OrderEntity orderEntity;\n\n    @BeforeEach\n    void setUp() {\n        // Creamos un OrderEntity con 2 items\n        orderEntity \u003d new OrderEntity();\n        orderEntity.setId(1L);\n        orderEntity.setOrderNumber(\"ORD-2024-001\");\n        orderEntity.setUserId(10L);\n        orderEntity.setStatus(\"PENDING\");\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        OrderItemEntity item1 \u003d new OrderItemEntity();\n        item1.setProductId(100L);\n        item1.setQuantity(2);\n        item1.setUnitPrice(BigDecimal.valueOf(50));\n        item1.setSubtotal(BigDecimal.valueOf(100));\n        item1.setOrderEntity(orderEntity);\n\n        OrderItemEntity item2 \u003d new OrderItemEntity();\n        item2.setProductId(101L);\n        item2.setQuantity(1);\n        item2.setUnitPrice(BigDecimal.valueOf(30));\n        item2.setSubtotal(BigDecimal.valueOf(30));\n        item2.setOrderEntity(orderEntity);\n\n        orderEntity.getItems().add(item1);\n        orderEntity.getItems().add(item2);\n\n        // Mocks de ProductClient\n        when(productClient.getProductById(100L)).thenReturn(new Product(100L, \"Producto1\", 50.0));\n        when(productClient.getProductById(101L)).thenReturn(new Product(101L, \"Producto2\", 30.0));\n\n        // Mock de UserClient\n        when(userClient.getUserById(10L)).thenR\n",
      "aiProbability": 70,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 86
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764475280877,
      "startOffset": 2876,
      "endOffset": 6350,
      "codeContent": "eturn(new User(10L, \"Juan\"));\n\n        // Mock de OrderRepository\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.of(orderEntity));\n        when(orderRepository.findTopByOrderByIdDesc()).thenReturn(Optional.of(orderEntity));\n\n        // Mocks de OrderItemMapper\n        when(orderItemMapper.toDomainWithProduct(any(OrderItemEntity.class), any(Product.class)))\n            .thenAnswer(invocation -\u003e {\n                OrderItemEntity entity \u003d invocation.getArgument(0);\n                Product product \u003d invocation.getArgument(1);\n                return OrderItem.builder()\n                        .productId(entity.getProductId())\n                        .quantity(entity.getQuantity())\n                        .unitPrice(entity.getUnitPrice().doubleValue())\n                        .subtotal(entity.getSubtotal().doubleValue())\n                        .product(null) // evita referencia circular\n                        .build();\n            });\n\n        // Mock de OrderMapper\n        when(orderMapper.toDomainWithUser(any(OrderEntity.class), any(User.class)))\n            .thenAnswer(invocation -\u003e {\n                OrderEntity e \u003d invocation.getArgument(0);\n                User u \u003d invocation.getArgument(1);\n                Order order \u003d new Order();\n                order.setOrderNumber(e.getOrderNumber());\n                order.setUser(u);\n                order.setItems(new HashSet\u003c\u003e());\n                return order;\n            });\n\n        when(orderMapper.toDomain(any(OrderEntity.class))).thenAnswer(invocation -\u003e {\n            OrderEntity e \u003d invocation.getArgument(0);\n            Order order \u003d new Order();\n            order.setOrderNumber(e.getOrderNumber());\n            order.setItems(new HashSet\u003c\u003e());\n            return order;\n        });\n    }\n\n    @Test\n    void testFindByIdMultipleItems() {\n        Order order \u003d orderService.findById(1L);\n        assertNotNull(order);\n        assertEquals(2, order.getItems().size(), \"Debe devolver 2 items\");\n        assertEquals(\"ORD-2024-001\", order.getOrderNumber());\n        assertNotNull(order.getUser());\n    }\n\n    @Test\n    void testFindByIdReturnNullWhenOrderNotFound() {\n        when(orderRepository.findByIdWithItems(999L)).thenReturn(Optional.empty());\n        Order order \u003d orderService.findById(999L);\n        assertNull(order);\n    }\n\n    @Test\n    void testRegisterOrderSuccess() {\n        // Creamos request con 1 item\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(10L);\n\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(100L);\n        itemRequest.setQuantity(2);\n\n        Set\u003cCreateOrderRequest.Item\u003e items \u003d new HashSet\u003c\u003e();\n        items.add(itemRequest);\n        request.setItems(items);\n\n        // Mock del save\n        when(orderRepository.save(any(OrderEntity.class))).thenAnswer(invocation -\u003e {\n            OrderEntity e \u003d invocation.getArgument(0);\n            e.setId(10L);\n            return e;\n        });\n\n        Order order \u003d orderService.register(request);\n        assertNotNull(order);\n        assertEquals(\"ORD-2024-001\", order.getOrderNumber()); // depende del mock\n        assertEquals(1, order.getItems().size());\n        assertNotNull(order.getUser());\n    }\n\n    @Test\n    void testNextOrderNumber() {\n        String number \u003d orderService.nextOrderNumber();\n        assertNotNull(number);\n        assertTrue(number.startsWith(\"ORD-\"));\n    }\n}",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 92
    },
    {
      "filePath": "/_Dummy_.java",
      "timestamp": 1764475296065,
      "startOffset": 39,
      "endOffset": 60,
      "codeContent": "java.lang.String name",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/Product.java",
      "timestamp": 1764475413323,
      "startOffset": 327,
      "endOffset": 347,
      "codeContent": "IntellijIdeaRulezzz ",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764475522774,
      "startOffset": 2608,
      "endOffset": 2838,
      "codeContent": "org.mockito.stubbing.OngoingStubbing\u003corg.mockito.stubbing.OngoingStubbing\u003cProduct\u003e\u003e producto1 \u003d when(when(productClient.getProductById(100L))\n                .thenReturn(new Product(100L, \"Producto1\", BigDecimal.valueOf(500.00)));",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 2
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764475522781,
      "startOffset": 1025,
      "endOffset": 1069,
      "codeContent": "import org.mockito.stubbing.OngoingStubbing;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/mapper/OrderItemMapper.java",
      "timestamp": 1764476107100,
      "startOffset": 88,
      "endOffset": 734,
      "codeContent": "client.Product;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport org.mapstruct.Mapper;\nimport org.mapstruct.factory.Mappers;\n\n@Mapper(componentModel \u003d \"spring\")\npublic interface OrderItemMapper {\n\n    OrderItemMapper INSTANCE \u003d Mappers.getMapper(OrderItemMapper.class);\n\n    OrderItem toDomain(OrderItemEntity entity);\n    OrderItemEntity toEntity(OrderItem domain);\n\n    default OrderItem toDomainWithProduct(OrderItemEntity entity, Product product) {\n        OrderItem orderItem \u003d toDomain(entity);\n        orderItem.setProduct(product);\n        return orderItem;\n    }",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 19
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764476149600,
      "startOffset": 0,
      "endOffset": 1183,
      "codeContent": "@SpringBootTest\npublic class OrderServiceTest {\n\n    @Autowired\n    private OrderService orderService;\n\n    @MockBean\n    private OrderMapper orderMapper;\n\n    @MockBean\n    private OrderItemMapper orderItemMapper;\n\n    @MockBean\n    private OrderRepository orderRepository;\n\n    @Test\n    void testFindByIdReturnNullWhenOrderNotFound() {\n        Long orderId \u003d 1L;\n\n        // Simula que el repositorio devuelve null\n        Mockito.when(orderRepository.findById(orderId)).thenReturn(Optional.empty());\n\n        OrderDTO result \u003d orderService.findById(orderId);\n        Assertions.assertNull(result);\n    }\n\n    @Test\n    void testFindByIdMultipleItems() {\n        Long orderId \u003d 1L;\n\n        Order order \u003d new Order();\n        order.setId(orderId);\n        order.setItems(List.of(new OrderItem(), new OrderItem()));\n\n        Mockito.when(orderRepository.findById(orderId)).thenReturn(Optional.of(order));\n\n        // Mockeamos el mapeo\n        Mockito.when(orderMapper.toDTO(order)).thenReturn(new OrderDTO());\n\n        OrderDTO result \u003d orderService.findById(orderId);\n        Assertions.assertNotNull(result);\n    }\n\n    // Otros tests similares: mockear repositorio y mappers\n}\n",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 46
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764476250182,
      "startOffset": 86,
      "endOffset": 106,
      "codeContent": "IntellijIdeaRulezzz ",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764476280029,
      "startOffset": 92,
      "endOffset": 145,
      "codeContent": "import com.orden.service.orden_service.dto.OrderItem;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764476285474,
      "startOffset": 1505,
      "endOffset": 1567,
      "codeContent": "(java.util.Set\u003ccom.orden.service.orden_service.dto.OrderItem\u003e)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764476289399,
      "startOffset": 1644,
      "endOffset": 1716,
      "codeContent": "(java.util.Optional\u003ccom.orden.service.orden_service.entity.OrderEntity\u003e)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764476289406,
      "startOffset": 146,
      "endOffset": 204,
      "codeContent": "import com.orden.service.orden_service.entity.OrderEntity;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764476289420,
      "startOffset": 1703,
      "endOffset": 1727,
      "codeContent": "(Optional\u003cOrderEntity\u003e) ",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764476398349,
      "startOffset": 1216,
      "endOffset": 1257,
      "codeContent": "com.orden.service.orden_service.dto.Order",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764476398370,
      "startOffset": 1216,
      "endOffset": 1257,
      "codeContent": "com.orden.service.orden_service.dto.Order",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/dto/Order.java",
      "timestamp": 1764476400829,
      "startOffset": 304,
      "endOffset": 354,
      "codeContent": "com.orden.service.orden_service.entity.OrderEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/dto/Order.java",
      "timestamp": 1764476400842,
      "startOffset": 98,
      "endOffset": 156,
      "codeContent": "import com.orden.service.orden_service.entity.OrderEntity;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764476414220,
      "startOffset": 1541,
      "endOffset": 1612,
      "codeContent": "(java.util.Set\u003ccom.orden.service.orden_service.entity.OrderItemEntity\u003e)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764476418846,
      "startOffset": 1812,
      "endOffset": 1855,
      "codeContent": "(com.orden.service.orden_service.dto.Order)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764476418851,
      "startOffset": 42,
      "endOffset": 91,
      "codeContent": "import com.orden.service.orden_service.dto.Order;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764476427599,
      "startOffset": 2649,
      "endOffset": 2692,
      "codeContent": "(com.orden.service.orden_service.dto.Order)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764476431535,
      "startOffset": 2797,
      "endOffset": 2840,
      "codeContent": "(com.orden.service.orden_service.dto.Order)",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/service/OrderService.java",
      "timestamp": 1764476435541,
      "startOffset": 5081,
      "endOffset": 5123,
      "codeContent": "public\u003c__TMP__\u003e __TMP__ registerOrder() {}",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/service/OrderService.java",
      "timestamp": 1764476435613,
      "startOffset": 5093,
      "endOffset": 5143,
      "codeContent": "com.orden.service.orden_service.entity.OrderEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/service/OrderService.java",
      "timestamp": 1764476435640,
      "startOffset": 5119,
      "endOffset": 5169,
      "codeContent": "com.orden.service.orden_service.entity.OrderEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/Odercontroller.java",
      "timestamp": 1764476959543,
      "startOffset": 793,
      "endOffset": 814,
      "codeContent": "(createOrderRequest);",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/dto/Order.java",
      "timestamp": 1764477252648,
      "startOffset": 0,
      "endOffset": 638,
      "codeContent": "package com.orden.service.orden_service.dto;\n\nimport com.orden.service.orden_service.client.User;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.time.LocalDateTime;\nimport java.util.Set;\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Order {\n    private Long id;\n    private String orderNumber;\n    private User user;                     // DTO puede contener User completo\n    private Set\u003cOrderItem\u003e items;          // DTO de los items\n    private Double totalAmount;            // Puede ser Double en DTO\n    private String status;\n    private LocalDateTime createdAt;\n}\n",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 23
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/entity/OrderEntity.java",
      "timestamp": 1764477268528,
      "startOffset": 0,
      "endOffset": 639,
      "codeContent": "package com.orden.service.orden_service.mapper;\n\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport org.mapstruct.Mapper;\nimport org.mapstruct.Mapping;\nimport org.mapstruct.factory.Mappers;\n\n@Mapper(componentModel \u003d \"spring\", uses \u003d {OrderItemMapper.class})\npublic interface OrderMapper {\n\n    OrderMapper INSTANCE \u003d Mappers.getMapper(OrderMapper.class);\n\n    @Mapping(source \u003d \"userId\", target \u003d \"user.id\") // si necesitas mapear UserId a User\n    Order toDto(OrderEntity entity);\n\n    @Mapping(source \u003d \"user.id\", target \u003d \"userId\")\n    OrderEntity toEntity(Order dto);\n}\n",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 20
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/mapper/OrderItemMapper.java",
      "timestamp": 1764477301337,
      "startOffset": 744,
      "endOffset": 829,
      "codeContent": "OrderItem toDto(OrderItemEntity entity);\n    OrderItemEntity toEntity(OrderItem dto);",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 2
    },
    {
      "filePath": "/OrderEntity.java",
      "timestamp": 1764477366714,
      "startOffset": 144,
      "endOffset": 164,
      "codeContent": "IntellijIdeaRulezzz ",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/entity/OrderEntity.java",
      "timestamp": 1764477380040,
      "startOffset": 162,
      "endOffset": 224,
      "codeContent": "import com.orden.service.orden_service.mapper.OrderItemMapper;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/entity/OrderEntity.java",
      "timestamp": 1764477432491,
      "startOffset": 0,
      "endOffset": 1467,
      "codeContent": "package com.orden.service.orden_service.entity;\n\nimport jakarta.persistence.*;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\n\n@Entity\n@Table(name \u003d \"orders\")\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class OrderEntity {\n\n    @Id\n    @GeneratedValue(strategy \u003d GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name \u003d \"order_number\", unique \u003d true, nullable \u003d false)\n    private String orderNumber;\n\n    @Column(name \u003d \"user_id\", nullable \u003d false)\n    private Long userId;\n\n    @Column(nullable \u003d false)\n    private String status;\n\n    @Column(name \u003d \"total_amount\", nullable \u003d false)\n    private BigDecimal totalAmount;\n\n    @Column(name \u003d \"created_at\", nullable \u003d false)\n    private LocalDateTime createdAt;\n\n    @Column(name \u003d \"updated_at\", nullable \u003d false)\n    private LocalDateTime updatedAt;\n\n    //@OneToMany(mappedBy \u003d \"orderEntity\", cascade \u003d CascadeType.ALL, orphanRemoval \u003d true, fetch \u003d FetchType.EAGER)\n    //private Set\u003cOrderItemEntity\u003e items \u003d new HashSet\u003c\u003e();\n\n    @OneToMany(mappedBy \u003d \"orderEntity\", cascade \u003d CascadeType.ALL, orphanRemoval \u003d true, fetch \u003d FetchType.LAZY)\n    //private List\u003cOrderItemEntity\u003e items \u003d new ArrayList\u003c\u003e();\n    private Set\u003cOrderItemEntity\u003e items \u003d new HashSet\u003c\u003e();\n}\n",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 53
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/entity/OrderEntity.java",
      "timestamp": 1764477432581,
      "startOffset": 1465,
      "endOffset": 1507,
      "codeContent": "    orderEntity.setItems(new HashSet\u003c\u003e());",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764477458418,
      "startOffset": 2446,
      "endOffset": 2501,
      "codeContent": "// Mockea que el mapper convierte la entidad a s√≠ misma",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764477458418,
      "startOffset": 2289,
      "endOffset": 2319,
      "codeContent": "orderService.nextOrderNumber()",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764477458420,
      "startOffset": 1956,
      "endOffset": 1990,
      "codeContent": "Equals(2, result.getItems().size()",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764477458421,
      "startOffset": 1768,
      "endOffset": 1907,
      "codeContent": "Mockito.when(orderMapper.toEntity(oIntellijIdeaRulezzzrder)).thenReturn(order);\n\n        OrderEntity result \u003d orderService.findById(orderId",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 3
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764477458422,
      "startOffset": 1578,
      "endOffset": 1661,
      "codeContent": "(java.util.Set\u003cOrderItemEntity\u003e) List.of(new OrderItemEntity(), new OrderItemEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764477471044,
      "startOffset": 1898,
      "endOffset": 1939,
      "codeContent": "com.orden.service.orden_service.dto.Order",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764477471062,
      "startOffset": 1898,
      "endOffset": 1939,
      "codeContent": "com.orden.service.orden_service.dto.Order",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764477472543,
      "startOffset": 1898,
      "endOffset": 1939,
      "codeContent": "com.orden.service.orden_service.dto.Order",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764477477475,
      "startOffset": 1499,
      "endOffset": 1540,
      "codeContent": "com.orden.service.orden_service.dto.Order",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/_Dummy_.java",
      "timestamp": 1764477481635,
      "startOffset": 106,
      "endOffset": 163,
      "codeContent": "com.orden.service.orden_service.entity.OrderEntity domain",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/target/generated-sources/annotations/com/orden/service/orden_service/mapper/OrderMapperImpl.java",
      "timestamp": 1764477481662,
      "startOffset": 1501,
      "endOffset": 1551,
      "codeContent": "com.orden.service.orden_service.entity.OrderEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/mapper/OrderMapper.java",
      "timestamp": 1764477481682,
      "startOffset": 476,
      "endOffset": 526,
      "codeContent": "com.orden.service.orden_service.entity.OrderEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764477566889,
      "startOffset": 0,
      "endOffset": 3270,
      "codeContent": "package com.orden.service.orden_service;\n\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport com.orden.service.orden_service.service.OrderService;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.MockitoAnnotations;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\nimport java.util.Optional;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@SpringBootTest\npublic class OrderServiceTest {\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @InjectMocks\n    private OrderService orderService;\n\n    private OrderEntity orderEntity;\n    private Order orderDto;\n\n    @BeforeEach\n    public void setUp() {\n        MockitoAnnotations.openMocks(this);\n\n        orderEntity \u003d new OrderEntity();\n        orderEntity.setId(1L);\n        orderEntity.setOrderNumber(\"ORD123\");\n        orderEntity.setUserId(10L);\n        orderEntity.setStatus(\"NEW\");\n        orderEntity.setTotalAmount(new BigDecimal(\"100.0\"));\n        orderEntity.setCreatedAt(LocalDateTime.now());\n        orderEntity.setUpdatedAt(LocalDateTime.now());\n\n        orderDto \u003d new Order();\n        orderDto.setId(1L);\n        orderDto.setOrderNumber(\"ORD123\");\n        orderDto.setStatus(\"NEW\");\n        orderDto.setTotalAmount(100.0);\n        orderDto.setCreatedAt(LocalDateTime.now());\n    }\n\n    @Test\n    public void testGetOrderById_Success() {\n        when(orderRepository.findById(1L)).thenReturn(Optional.of(orderEntity));\n        when(orderMapper.toDto(orderEntity)).thenReturn(orderDto);\n\n        Order result \u003d orderService.getOrderById(1L);\n\n        assertNotNull(result);\n        assertEquals(\"ORD123\", result.getOrderNumber());\n        assertEquals(100.0, result.getTotalAmount());\n        verify(orderRepository, times(1)).findById(1L);\n        verify(orderMapper, times(1)).toDto(orderEntity);\n    }\n\n    @Test\n    public void testGetOrderById_NotFound() {\n        when(orderRepository.findById(2L)).thenReturn(Optional.empty());\n\n        Exception exception \u003d assertThrows(RuntimeException.class, () -\u003e {\n            orderService.getOrderById(2L);\n        });\n\n        assertEquals(\"Order not found\", exception.getMessage());\n        verify(orderRepository, times(1)).findById(2L);\n    }\n\n    @Test\n    public void testSaveOrder() {\n        when(orderMapper.toEntity(orderDto)).thenReturn(orderEntity);\n        when(orderRepository.save(orderEntity)).thenReturn(orderEntity);\n        when(orderMapper.toDto(orderEntity)).thenReturn(orderDto);\n\n        Order result \u003d orderService.saveOrder(orderDto);\n\n        assertNotNull(result);\n        assertEquals(\"ORD123\", result.getOrderNumber());\n        verify(orderRepository, times(1)).save(orderEntity);\n        verify(orderMapper, times(1)).toEntity(orderDto);\n        verify(orderMapper, times(1)).toDto(orderEntity);\n    }\n}\n",
      "aiProbability": 70,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 100
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/mapper/OrderMapper.java",
      "timestamp": 1764477573117,
      "startOffset": 681,
      "endOffset": 731,
      "codeContent": "com.orden.service.orden_service.entity.OrderEntity",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/_Dummy_.java",
      "timestamp": 1764477659850,
      "startOffset": 106,
      "endOffset": 154,
      "codeContent": "com.orden.service.orden_service.dto.Order domain",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/main/java/com/orden/service/orden_service/service/OrderService.java",
      "timestamp": 1764477667567,
      "startOffset": 5086,
      "endOffset": 5127,
      "codeContent": "public\u003c__TMP__\u003e __TMP__ getOrderById() {}",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/service/OrderServiceTest.java",
      "timestamp": 1764477795994,
      "startOffset": 0,
      "endOffset": 5459,
      "codeContent": "package com.orden.service.orden_service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport com.orden.service.orden_service.service.OrderService;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.MockitoAnnotations;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.HashSet;\nimport java.util.Optional;\nimport java.util.Set;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\n@SpringBootTest\npublic class OrderServiceTest {\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @InjectMocks\n    private OrderService orderService;\n\n    private OrderEntity orderEntity;\n    private Order orderDto;\n    private User user;\n\n    @BeforeEach\n    public void setUp() {\n        MockitoAnnotations.openMocks(this);\n\n        // Usuario simulado\n        user \u003d new User();\n        user.setId(1L);\n        user.setName(\"John Doe\");\n\n        // OrdenEntity simulada\n        orderEntity \u003d new OrderEntity();\n        orderEntity.setId(1L);\n        orderEntity.setOrderNumber(\"ORD-2025-001\");\n        orderEntity.setUserId(1L);\n        orderEntity.setStatus(\"PENDING\");\n        orderEntity.setTotalAmount(BigDecimal.valueOf(100.0));\n        orderEntity.setCreatedAt(LocalDateTime.now());\n        orderEntity.setUpdatedAt(LocalDateTime.now());\n        orderEntity.setItems(new HashSet\u003c\u003e());\n\n        // DTO simulado\n        orderDto \u003d new Order();\n        orderDto.setId(1L);\n        orderDto.setOrderNumber(\"ORD-2025-001\");\n        orderDto.setStatus(\"PENDING\");\n        orderDto.setTotalAmount(100.0);\n        orderDto.setCreatedAt(LocalDateTime.now());\n        orderDto.setItems(new HashSet\u003c\u003e());\n        orderDto.setUser(user);\n    }\n\n    @Test\n    public void testFindById_OrderExists() {\n        // Simulando repositorio y clientes externos\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(1L)).thenReturn(user);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(orderDto);\n\n        Set\u003cOrderItem\u003e items \u003d new HashSet\u003c\u003e();\n        when(orderEntity.getItems()).thenReturn(new HashSet\u003c\u003e());\n        // Si hubiera OrderItems, tambi√©n se mapear√≠an con orderItemMapper.toDomainWithProduct\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2025-001\", result.getOrderNumber());\n        assertEquals(\"PENDING\", result.getStatus());\n        assertEquals(100.0, result.getTotalAmount());\n        verify(orderRepository, times(1)).findByIdWithItems(1L);\n        verify(userClient, times(1)).getUserById(1L);\n        verify(orderMapper, times(1)).toDomainWithUser(orderEntity, user);\n    }\n\n    @Test\n    public void testFindById_OrderNotFound() {\n        when(orderRepository.findByIdWithItems(2L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(2L);\n\n        assertNull(result);\n        verify(orderRepository, times(1)).findByIdWithItems(2L);\n        verifyNoInteractions(userClient);\n        verifyNoInteractions(orderMapper);\n    }\n\n    @Test\n    public void testRegisterOrder() {\n        // Crear request simulado\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(100L);\n        itemRequest.setQuantity(2);\n\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(1L);\n        request.setItems(Set.of(itemRequest));\n\n        Product product \u003d new Product();\n        product.setId(100L);\n        product.setName(\"Product A\");\n        product.setPrice(BigDecimal.valueOf(50.0));\n\n        // Simular llamadas externas\n        when(productClient.getProductById(100L)).thenReturn(product);\n        when(orderRepository.save(any(OrderEntity.class))).thenReturn(orderEntity);\n        when(orderMapper.toDomain(any(OrderEntity.class))).thenReturn(orderDto);\n        when(userClient.getUserById(1L)).thenReturn(user);\n\n        Order result \u003d orderService.registerOrder(request);\n\n        assertNotNull(result);\n        assertEquals(user, result.getUser());\n        assertEquals(\"ORD-2025-001\", result.getOrderNumber());\n        verify(orderRepository, times(1)).save(any(OrderEntity.class));\n        verify(orderMapper, times(1)).toDomain(orderEntity);\n        verify(productClient, times(1)).getProductById(100L);\n        verify(userClient, times(1)).getUserById(1L);\n    }\n}\n",
      "aiProbability": 70,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 156
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/target/generated-sources/annotations/com/orden/service/orden_service/mapper/OrderItemMapperImpl.java",
      "timestamp": 1764477886750,
      "startOffset": 378,
      "endOffset": 2346,
      "codeContent": "44:41-0500\",\n    comments \u003d \"version: 1.5.5.Final, compiler: javac, environment: Java 21.0.8 (Amazon.com Inc.)\"\n)\n@Component\npublic class OrderItemMapperImpl implements OrderItemMapper {\n\n    @Override\n    public OrderItem toDomain(OrderItemEntity entity) {\n        if ( entity \u003d\u003d null ) {\n            return null;\n        }\n\n        OrderItem.OrderItemBuilder orderItem \u003d OrderItem.builder();\n\n        orderItem.productId( entity.getProductId() );\n        orderItem.quantity( entity.getQuantity() );\n        if ( entity.getUnitPrice() !\u003d null ) {\n            orderItem.unitPrice( entity.getUnitPrice().doubleValue() );\n        }\n        if ( entity.getSubtotal() !\u003d null ) {\n            orderItem.subtotal( entity.getSubtotal().doubleValue() );\n        }\n\n        return orderItem.build();\n    }\n\n    @Override\n    public OrderItem toDto(OrderItemEntity entity) {\n        if ( entity \u003d\u003d null ) {\n            return null;\n        }\n\n        OrderItem.OrderItemBuilder orderItem \u003d OrderItem.builder();\n\n        orderItem.productId( entity.getProductId() );\n        orderItem.quantity( entity.getQuantity() );\n        if ( entity.getUnitPrice() !\u003d null ) {\n            orderItem.unitPrice( entity.getUnitPrice().doubleValue() );\n        }\n        if ( entity.getSubtotal() !\u003d null ) {\n            orderItem.subtotal( entity.getSubtotal().doubleValue() );\n        }\n\n        return orderItem.build();\n    }\n\n    @Override\n    public OrderItemEntity toEntity(OrderItem dto) {\n        if ( dto \u003d\u003d null ) {\n            return null;\n        }\n\n        OrderItemEntity orderItemEntity \u003d new OrderItemEntity();\n\n        orderItemEntity.setProductId( dto.getProductId() );\n        orderItemEntity.setQuantity( dto.getQuantity() );\n        if ( dto.getUnitPrice() !\u003d null ) {\n            orderItemEntity.setUnitPrice( BigDecimal.valueOf( dto.getUnitPrice() ) );\n        }\n        if ( dto.getSubtotal() !\u003d null ) {\n            orderItemEntity.setSubtotal( BigDecimal.valueOf( dto",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 61
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/OrderServiceTest.java",
      "timestamp": 1764478133119,
      "startOffset": 3995,
      "endOffset": 6020,
      "codeContent": "rify(orderItemMapper, times(orderEntity.getItems().size()))\n                .toDomainWithProduct(any(OrderItemEntity.class), any(Product.class));\n    }\n\n    @Test\n    public void testFindById_OrderNotFound() {\n        when(orderRepository.findByIdWithItems(2L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(2L);\n\n        assertNull(result);\n        verify(orderRepository, times(1)).findByIdWithItems(2L);\n        verifyNoInteractions(userClient);\n        verifyNoInteractions(orderMapper);\n        verifyNoInteractions(orderItemMapper);\n    }\n\n    @Test\n    public void testRegisterOrder() {\n        // Crear request simulado\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(100L);\n        itemRequest.setQuantity(2);\n\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(1L);\n        request.setItems(Set.of(itemRequest));\n\n        Product product \u003d new Product();\n        product.setId(100L);\n        product.setName(\"Product A\");\n        product.setPrice(BigDecimal.valueOf(50.0));\n\n        when(productClient.getProductById(100L)).thenReturn(product);\n        when(orderRepository.save(any(OrderEntity.class))).thenReturn(orderEntity);\n        when(orderMapper.toDomain(any(OrderEntity.class))).thenReturn(orderDto);\n        when(userClient.getUserById(1L)).thenReturn(user);\n        when(orderItemMapper.toDomainWithProduct(any(OrderItemEntity.class), any(Product.class)))\n                .thenAnswer(invocation -\u003e new OrderItem());\n\n        Order result \u003d orderService.registerOrder(request);\n\n        assertNotNull(result);\n        assertEquals(user, result.getUser());\n        assertEquals(\"ORD-2025-001\", result.getOrderNumber());\n        verify(orderRepository, times(1)).save(any(OrderEntity.class));\n        verify(orderMapper, times(1)).toDomain(orderEntity);\n        verify(productClient, times(1)).getProductById(100L);\n        verify(userClient, times(1)).getUserById(1L);\n    }\n}",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 51
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/OrderServiceTest.java",
      "timestamp": 1764479152408,
      "startOffset": 4027,
      "endOffset": 8913,
      "codeContent": "package com.orden.service.orden_service;\n\nimport com.orden.service.orden_service.client.Product;\nimport com.orden.service.orden_service.client.ProductClient;\nimport com.orden.service.orden_service.client.User;\nimport com.orden.service.orden_service.client.UserClient;\nimport com.orden.service.orden_service.dto.CreateOrderRequest;\nimport com.orden.service.orden_service.dto.Order;\nimport com.orden.service.orden_service.dto.OrderItem;\nimport com.orden.service.orden_service.entity.OrderEntity;\nimport com.orden.service.orden_service.entity.OrderItemEntity;\nimport com.orden.service.orden_service.mapper.OrderItemMapper;\nimport com.orden.service.orden_service.mapper.OrderMapper;\nimport com.orden.service.orden_service.repository.OrderRepository;\nimport com.orden.service.orden_service.service.OrderService;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.MockitoAnnotations;\n\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\nimport java.util.HashSet;\nimport java.util.Optional;\nimport java.util.Set;\n\nimport static org.junit.jupiter.api.Assertions.*;\nimport static org.mockito.Mockito.*;\n\npublic class OrderServiceTest {\n\n    @Mock\n    private UserClient userClient;\n\n    @Mock\n    private ProductClient productClient;\n\n    @Mock\n    private OrderRepository orderRepository;\n\n    @Mock\n    private OrderMapper orderMapper;\n\n    @Mock\n    private OrderItemMapper orderItemMapper;\n\n    @InjectMocks\n    private OrderService orderService;\n\n    private OrderEntity orderEntity;\n    private Order orderDto;\n    private User user;\n\n    @BeforeEach\n    public void setUp() {\n        MockitoAnnotations.openMocks(this);\n\n        // Usuario simulado\n        user \u003d new User();\n        user.setId(1L);\n        user.setName(\"John Doe\");\n\n        // OrdenEntity simulada\n        orderEntity \u003d new OrderEntity();\n        orderEntity.setId(1L);\n        orderEntity.setOrderNumber(\"ORD-2025-001\");\n        orderEntity.setUserId(1L);\n        orderEntity.setStatus(\"PENDING\");\n        orderEntity.setTotalAmount(BigDecimal.valueOf(100.0));\n        orderEntity.setCreatedAt(LocalDateTime.now());\n        orderEntity.setUpdatedAt(LocalDateTime.now());\n\n        // Items simulados\n        OrderItemEntity itemEntity \u003d new OrderItemEntity();\n        itemEntity.setId(1L);\n        itemEntity.setProductId(100L);\n        itemEntity.setQuantity(2);\n        itemEntity.setUnitPrice(BigDecimal.valueOf(50.0));\n        itemEntity.setSubtotal(BigDecimal.valueOf(100.0));\n        itemEntity.setOrderEntity(orderEntity);\n\n        Set\u003cOrderItemEntity\u003e items \u003d new HashSet\u003c\u003e();\n        items.add(itemEntity);\n        orderEntity.setItems(items);\n\n        // DTO simulado\n        orderDto \u003d new Order();\n        orderDto.setId(1L);\n        orderDto.setOrderNumber(\"ORD-2025-001\");\n        orderDto.setStatus(\"PENDING\");\n        orderDto.setTotalAmount(100.0);\n        orderDto.setCreatedAt(LocalDateTime.now());\n        orderDto.setItems(new HashSet\u003c\u003e());\n        orderDto.setUser(user);\n    }\n\n    @Test\n    public void testFindById_OrderExists() {\n        when(orderRepository.findByIdWithItems(1L)).thenReturn(Optional.of(orderEntity));\n        when(userClient.getUserById(1L)).thenReturn(user);\n        when(orderMapper.toDomainWithUser(orderEntity, user)).thenReturn(orderDto);\n        when(orderItemMapper.toDomainWithProduct(any(OrderItemEntity.class), any(Product.class)))\n                .thenAnswer(invocation -\u003e new OrderItem()); // retorna item dummy\n\n        Order result \u003d orderService.findById(1L);\n\n        assertNotNull(result);\n        assertEquals(\"ORD-2025-001\", result.getOrderNumber());\n        assertEquals(\"PENDING\", result.getStatus());\n        assertEquals(user, result.getUser());\n    }\n\n    @Test\n    public void testFindById_OrderNotFound() {\n        when(orderRepository.findByIdWithItems(2L)).thenReturn(Optional.empty());\n\n        Order result \u003d orderService.findById(2L);\n        assertNull(result);\n    }\n\n    @Test\n    public void testRegisterOrder() {\n        // Crear request simulado\n        CreateOrderRequest.Item itemRequest \u003d new CreateOrderRequest.Item();\n        itemRequest.setProductId(1L);\n        itemRequest.setQuantity(2);\n\n        CreateOrderRequest request \u003d new CreateOrderRequest();\n        request.setUserId(1L);\n        request.setItems(Set.of(itemRequest));\n\n        Product product \u003d new Product();\n        product.setId(100L);\n        product.setName(\"Product A\");\n        product.setPrice(BigDecimal.valueOf(50.0));\n\n// Mock para el ID correcto que usa el request\n        when(productClient.getProductById(100L)).thenReturn(product);\n        Order result \u003d orderService.registerOrder(request);\n\n        assertNotNull(result);\n        assertEquals(user, result.getUser());\n        assertEquals(\"ORD-2025-001\", result.getOrderNumber());\n    }\n}\n",
      "aiProbability": 95,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 147
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/OrderServiceTest.java",
      "timestamp": 1764479534268,
      "startOffset": 978,
      "endOffset": 1038,
      "codeContent": "import org.springframework.boot.test.context.SpringBootTest;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/home/esaldana/Projects/IntelliJ_Pruebas/BootCamp_Mod_06_Jenkis/Personal/m6-sbp-c05-micro-order-service/src/test/java/com/orden/service/orden_service/OrderServiceTest.java",
      "timestamp": 1764479568964,
      "startOffset": 1039,
      "endOffset": 1098,
      "codeContent": "import org.springframework.boot.test.mock.mockito.MockBean;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/fragment.java",
      "timestamp": 1764479713051,
      "startOffset": 0,
      "endOffset": 31,
      "codeContent": "com.orden.service.orden_service",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/fragment.java",
      "timestamp": 1764479713054,
      "startOffset": 0,
      "endOffset": 31,
      "codeContent": "com.orden.service.orden_service",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/fragment.java",
      "timestamp": 1764479731095,
      "startOffset": 0,
      "endOffset": 39,
      "codeContent": "com.orden.service.orden_service.service",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/fragment.java",
      "timestamp": 1764479731097,
      "startOffset": 0,
      "endOffset": 39,
      "codeContent": "com.orden.service.orden_service.service",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764479747439,
      "startOffset": 1267,
      "endOffset": 1322,
      "codeContent": "org.springframework.test.context.bean.override.mockito.",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764479747447,
      "startOffset": 986,
      "endOffset": 1060,
      "codeContent": "import org.springframework.test.context.bean.override.mockito.MockitoBean;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764479768479,
      "startOffset": 1635,
      "endOffset": 1680,
      "codeContent": "org.springframework.beans.factory.annotation.",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    },
    {
      "filePath": "/OrderServiceTest.java",
      "timestamp": 1764479768487,
      "startOffset": 926,
      "endOffset": 988,
      "codeContent": "import org.springframework.beans.factory.annotation.Autowired;",
      "aiProbability": 90,
      "aiTool": "AI Assistant",
      "detectionMethod": "REALTIME_SPEED_ANALYSIS",
      "lineCount": 1
    }
  ],
  "toolStats": {
    "AI Assistant": {
      "usageCount": 212,
      "totalLines": 4293
    }
  }
}